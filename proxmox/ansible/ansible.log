2026-01-14 20:42:05,749 p=17920 u=laxman n=ansible | 192.168.0.31 | SUCCESS => {
    "changed": false,
    "ping": "pong"
}
2026-01-14 20:42:05,750 p=17920 u=laxman n=ansible | 192.168.0.32 | SUCCESS => {
    "changed": false,
    "ping": "pong"
}
2026-01-14 20:42:05,751 p=17920 u=laxman n=ansible | 192.168.0.33 | SUCCESS => {
    "changed": false,
    "ping": "pong"
}
2026-01-14 20:42:05,793 p=17920 u=laxman n=ansible | 192.168.0.30 | SUCCESS => {
    "changed": false,
    "ping": "pong"
}
2026-01-14 21:24:29,373 p=19722 u=laxman n=ansible | ERROR! the playbook: 01-prepare.yml could not be found
2026-01-14 21:24:43,700 p=19815 u=laxman n=ansible | PLAY [Prepare all systems (base configuration)] **********************************************************************
2026-01-14 21:24:43,712 p=19815 u=laxman n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2026-01-14 21:24:46,226 p=19815 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 21:24:46,236 p=19815 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:24:46,243 p=19815 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:24:46,265 p=19815 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:24:46,343 p=19815 u=laxman n=ansible | TASK [Update apt cache] **********************************************************************************************
2026-01-14 21:24:47,524 p=19815 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:24:47,544 p=19815 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:24:47,591 p=19815 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:24:56,145 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:24:56,153 p=19815 u=laxman n=ansible | TASK [Upgrade all installed packages] ********************************************************************************
2026-01-14 21:25:17,130 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:25:17,207 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:25:17,273 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:25:18,798 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:25:18,807 p=19815 u=laxman n=ansible | TASK [Install base utility packages] *********************************************************************************
2026-01-14 21:26:03,895 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:26:05,811 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:26:06,128 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:26:06,895 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:26:06,898 p=19815 u=laxman n=ansible | TASK [Ensure ansible user exists] ************************************************************************************
2026-01-14 21:26:07,528 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:26:07,565 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:26:07,579 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:26:07,600 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:26:07,606 p=19815 u=laxman n=ansible | TASK [Allow ansible user passwordless sudo] **************************************************************************
2026-01-14 21:26:08,454 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:26:08,460 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:26:08,463 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:26:08,505 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:26:08,507 p=19815 u=laxman n=ansible | TASK [Ensure .ssh directory exists for ansible user] *****************************************************************
2026-01-14 21:26:12,550 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:26:12,551 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:26:12,553 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:26:12,595 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:26:12,598 p=19815 u=laxman n=ansible | TASK [Add SSH key to ansible user (append only)] *********************************************************************
2026-01-14 21:26:13,161 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:26:13,189 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:26:13,203 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:26:13,213 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:26:13,216 p=19815 u=laxman n=ansible | TASK [Set system hostname from inventory] ****************************************************************************
2026-01-14 21:26:14,092 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:26:14,112 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:26:14,128 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:26:14,138 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:26:14,141 p=19815 u=laxman n=ansible | TASK [Ensure hostname is in /etc/hosts] ******************************************************************************
2026-01-14 21:26:14,592 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:26:14,604 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:26:14,604 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:26:14,609 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:26:14,615 p=19815 u=laxman n=ansible | TASK [Disable swap immediately] **************************************************************************************
2026-01-14 21:26:15,066 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:26:15,067 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:26:15,070 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:26:15,116 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:26:15,119 p=19815 u=laxman n=ansible | TASK [Remove swap entries from /etc/fstab] ***************************************************************************
2026-01-14 21:26:15,558 p=19815 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 21:26:15,567 p=19815 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:26:15,574 p=19815 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:26:15,598 p=19815 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:26:15,600 p=19815 u=laxman n=ansible | TASK [Document Kubernetes-required kernel modules] *******************************************************************
2026-01-14 21:26:16,327 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:26:16,333 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:26:16,338 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:26:16,409 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:26:16,412 p=19815 u=laxman n=ansible | TASK [Ensure UFW is installed] ***************************************************************************************
2026-01-14 21:26:17,618 p=19815 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:26:17,638 p=19815 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:26:17,657 p=19815 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 21:26:17,753 p=19815 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:26:17,757 p=19815 u=laxman n=ansible | TASK [Allow SSH before enabling firewall] ****************************************************************************
2026-01-14 21:26:18,669 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:26:18,686 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:26:18,695 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:26:18,751 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:26:18,755 p=19815 u=laxman n=ansible | TASK [Enable UFW (default deny incoming)] ****************************************************************************
2026-01-14 21:26:21,386 p=19815 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:26:21,430 p=19815 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:26:21,457 p=19815 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:26:21,519 p=19815 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 21:26:21,522 p=19815 u=laxman n=ansible | TASK [Verify swap is disabled] ***************************************************************************************
2026-01-14 21:26:21,884 p=19815 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:26:21,910 p=19815 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:26:21,936 p=19815 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:26:21,939 p=19815 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 21:26:21,944 p=19815 u=laxman n=ansible | TASK [Display swap status] *******************************************************************************************
2026-01-14 21:26:21,973 p=19815 u=laxman n=ansible | ok: [192.168.0.30] => {
    "msg": "               total        used        free      shared  buff/cache   available\nMem:           3.8Gi       451Mi       2.5Gi       1.0Mi       1.1Gi       3.4Gi\nSwap:             0B          0B          0B"
}
2026-01-14 21:26:21,975 p=19815 u=laxman n=ansible | ok: [192.168.0.31] => {
    "msg": "               total        used        free      shared  buff/cache   available\nMem:           3.8Gi       443Mi       2.5Gi       1.0Mi       1.1Gi       3.4Gi\nSwap:             0B          0B          0B"
}
2026-01-14 21:26:21,975 p=19815 u=laxman n=ansible | ok: [192.168.0.32] => {
    "msg": "               total        used        free      shared  buff/cache   available\nMem:           3.8Gi       426Mi       2.5Gi       1.0Mi       1.2Gi       3.4Gi\nSwap:             0B          0B          0B"
}
2026-01-14 21:26:21,983 p=19815 u=laxman n=ansible | ok: [192.168.0.33] => {
    "msg": "               total        used        free      shared  buff/cache   available\nMem:           3.8Gi       456Mi       2.5Gi       1.0Mi       1.2Gi       3.4Gi\nSwap:             0B          0B          0B"
}
2026-01-14 21:26:21,986 p=19815 u=laxman n=ansible | TASK [Install QEMU guest agent] **************************************************************************************
2026-01-14 21:26:23,170 p=19815 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:26:23,191 p=19815 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:26:23,242 p=19815 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 21:26:23,281 p=19815 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:26:23,286 p=19815 u=laxman n=ansible | TASK [Enable and start qemu-guest-agent] *****************************************************************************
2026-01-14 21:26:24,030 p=19815 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:26:24,051 p=19815 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:26:24,086 p=19815 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 21:26:24,088 p=19815 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:26:24,094 p=19815 u=laxman n=ansible | TASK [Download latest kubectl stable version string] *****************************************************************
2026-01-14 21:26:24,113 p=19815 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-14 21:26:24,125 p=19815 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-14 21:26:24,126 p=19815 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-14 21:26:24,132 p=19815 u=laxman n=ansible | skipping: [192.168.0.33]
2026-01-14 21:26:24,135 p=19815 u=laxman n=ansible | TASK [Download kubectl binary] ***************************************************************************************
2026-01-14 21:26:24,155 p=19815 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-14 21:26:24,162 p=19815 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-14 21:26:24,164 p=19815 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-14 21:26:24,168 p=19815 u=laxman n=ansible | skipping: [192.168.0.33]
2026-01-14 21:26:24,173 p=19815 u=laxman n=ansible | TASK [Verify kubectl installed] **************************************************************************************
2026-01-14 21:26:24,192 p=19815 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-14 21:26:24,200 p=19815 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-14 21:26:24,200 p=19815 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-14 21:26:24,206 p=19815 u=laxman n=ansible | skipping: [192.168.0.33]
2026-01-14 21:26:24,241 p=19815 u=laxman n=ansible | PLAY RECAP ***********************************************************************************************************
2026-01-14 21:26:24,242 p=19815 u=laxman n=ansible | 192.168.0.30               : ok=20   changed=12   unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2026-01-14 21:26:24,242 p=19815 u=laxman n=ansible | 192.168.0.31               : ok=20   changed=12   unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2026-01-14 21:26:24,242 p=19815 u=laxman n=ansible | 192.168.0.32               : ok=20   changed=12   unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2026-01-14 21:26:24,242 p=19815 u=laxman n=ansible | 192.168.0.33               : ok=20   changed=13   unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2026-01-14 21:30:48,926 p=21108 u=laxman n=ansible | PLAY [Setup Kubernetes Master Node (K3s)] **********************************************************************************
2026-01-14 21:30:48,938 p=21108 u=laxman n=ansible | TASK [Gathering Facts] *****************************************************************************************************
2026-01-14 21:30:50,597 p=21108 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:30:50,603 p=21108 u=laxman n=ansible | TASK [Allow Kubernetes API] ************************************************************************************************
2026-01-14 21:30:51,241 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:30:51,243 p=21108 u=laxman n=ansible | TASK [Allow Flannel VXLAN] *************************************************************************************************
2026-01-14 21:30:51,821 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:30:51,824 p=21108 u=laxman n=ansible | TASK [Allow kubelet API] ***************************************************************************************************
2026-01-14 21:30:52,401 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:30:52,404 p=21108 u=laxman n=ansible | TASK [Allow NodePort range] ************************************************************************************************
2026-01-14 21:30:52,995 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:30:53,000 p=21108 u=laxman n=ansible | TASK [Allow loopback traffic] **********************************************************************************************
2026-01-14 21:30:53,587 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:30:53,593 p=21108 u=laxman n=ansible | TASK [Check if K3s is already installed] ***********************************************************************************
2026-01-14 21:30:53,940 p=21108 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:30:53,943 p=21108 u=laxman n=ansible | TASK [Download K3s install script] *****************************************************************************************
2026-01-14 21:30:59,372 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:30:59,378 p=21108 u=laxman n=ansible | TASK [Install K3s master] **************************************************************************************************
2026-01-14 21:31:11,957 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:31:11,959 p=21108 u=laxman n=ansible | TASK [Ensure K3s service is running] ***************************************************************************************
2026-01-14 21:31:12,664 p=21108 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:31:12,667 p=21108 u=laxman n=ansible | TASK [Wait for K3s API] ****************************************************************************************************
2026-01-14 21:31:13,051 p=21108 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:31:13,053 p=21108 u=laxman n=ansible | TASK [Verify K3s responds] *************************************************************************************************
2026-01-14 21:31:13,445 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:31:13,448 p=21108 u=laxman n=ansible | TASK [Create kubeconfig directory] *****************************************************************************************
2026-01-14 21:31:13,804 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:31:13,810 p=21108 u=laxman n=ansible | TASK [Copy kubeconfig to ansible user] *************************************************************************************
2026-01-14 21:31:14,257 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:31:14,261 p=21108 u=laxman n=ansible | TASK [Update kubeconfig server address] ************************************************************************************
2026-01-14 21:31:14,607 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:31:14,610 p=21108 u=laxman n=ansible | TASK [Create base namespaces] **********************************************************************************************
2026-01-14 21:31:15,635 p=21108 u=laxman n=ansible | changed: [192.168.0.30] => (item=monitoring)
2026-01-14 21:31:16,324 p=21108 u=laxman n=ansible | changed: [192.168.0.30] => (item=jenkins)
2026-01-14 21:31:16,328 p=21108 u=laxman n=ansible | TASK [Read worker join token] **********************************************************************************************
2026-01-14 21:31:16,695 p=21108 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:31:16,702 p=21108 u=laxman n=ansible | TASK [Set worker join token fact] ******************************************************************************************
2026-01-14 21:31:16,743 p=21108 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:31:16,745 p=21108 u=laxman n=ansible | TASK [Show cluster info] ***************************************************************************************************
2026-01-14 21:31:17,164 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:31:17,167 p=21108 u=laxman n=ansible | TASK [debug] ***************************************************************************************************************
2026-01-14 21:31:17,179 p=21108 u=laxman n=ansible | ok: [192.168.0.30] => {
    "msg": "\u001b[0;32mKubernetes control plane\u001b[0m is running at \u001b[0;33mhttps://127.0.0.1:6443\u001b[0m\n\u001b[0;32mCoreDNS\u001b[0m is running at \u001b[0;33mhttps://127.0.0.1:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\u001b[0m\n\u001b[0;32mMetrics-server\u001b[0m is running at \u001b[0;33mhttps://127.0.0.1:6443/api/v1/namespaces/kube-system/services/https:metrics-server:https/proxy\u001b[0m\n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'."
}
2026-01-14 21:31:17,183 p=21108 u=laxman n=ansible | TASK [Show node list] ******************************************************************************************************
2026-01-14 21:31:17,580 p=21108 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:31:17,582 p=21108 u=laxman n=ansible | TASK [debug] ***************************************************************************************************************
2026-01-14 21:31:17,593 p=21108 u=laxman n=ansible | ok: [192.168.0.30] => {
    "msg": "NAME           STATUS   ROLES                  AGE   VERSION        INTERNAL-IP    EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION     CONTAINER-RUNTIME\n192.168.0.30   Ready    control-plane,master   6s    v1.28.3+k3s1   192.168.0.30   <none>        Ubuntu 24.04.3 LTS   6.8.0-90-generic   containerd://1.7.7-k3s1"
}
2026-01-14 21:31:17,604 p=21108 u=laxman n=ansible | PLAY RECAP *****************************************************************************************************************
2026-01-14 21:31:17,604 p=21108 u=laxman n=ansible | 192.168.0.30               : ok=22   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-14 21:33:30,189 p=21685 u=laxman n=ansible | PLAY [Setup Kubernetes Worker Nodes (K3s Agent)] **********************************************************************
2026-01-14 21:33:30,200 p=21685 u=laxman n=ansible | TASK [Gathering Facts] ************************************************************************************************
2026-01-14 21:33:32,049 p=21685 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:33:32,055 p=21685 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:33:32,069 p=21685 u=laxman n=ansible | TASK [Allow required K3s worker ports] ********************************************************************************
2026-01-14 21:33:32,812 p=21685 u=laxman n=ansible | changed: [192.168.0.32] => (item={'port': '10250', 'proto': 'tcp'})
2026-01-14 21:33:32,819 p=21685 u=laxman n=ansible | changed: [192.168.0.31] => (item={'port': '10250', 'proto': 'tcp'})
2026-01-14 21:33:33,474 p=21685 u=laxman n=ansible | changed: [192.168.0.32] => (item={'port': '10255', 'proto': 'tcp'})
2026-01-14 21:33:33,476 p=21685 u=laxman n=ansible | changed: [192.168.0.31] => (item={'port': '10255', 'proto': 'tcp'})
2026-01-14 21:33:34,142 p=21685 u=laxman n=ansible | changed: [192.168.0.32] => (item={'port': '8472', 'proto': 'udp'})
2026-01-14 21:33:34,142 p=21685 u=laxman n=ansible | changed: [192.168.0.31] => (item={'port': '8472', 'proto': 'udp'})
2026-01-14 21:33:34,830 p=21685 u=laxman n=ansible | changed: [192.168.0.31] => (item={'port': '30000:32767', 'proto': 'tcp'})
2026-01-14 21:33:34,831 p=21685 u=laxman n=ansible | changed: [192.168.0.32] => (item={'port': '30000:32767', 'proto': 'tcp'})
2026-01-14 21:33:34,834 p=21685 u=laxman n=ansible | TASK [Allow loopback traffic] *****************************************************************************************
2026-01-14 21:33:35,513 p=21685 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:33:35,519 p=21685 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:33:35,522 p=21685 u=laxman n=ansible | TASK [Check if K3s agent already installed] ***************************************************************************
2026-01-14 21:33:35,905 p=21685 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:33:35,905 p=21685 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:33:35,908 p=21685 u=laxman n=ansible | TASK [Create K3s configuration directory] *****************************************************************************
2026-01-14 21:33:36,304 p=21685 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:33:36,305 p=21685 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:33:36,311 p=21685 u=laxman n=ansible | TASK [Create K3s agent config] ****************************************************************************************
2026-01-14 21:33:36,329 p=21685 u=laxman n=ansible | fatal: [192.168.0.31]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: {{ hostvars[k3s_master].ansible_host }}: 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_host'. 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_host'. {{ hostvars[k3s_master].ansible_host }}: 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_host'. 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_host'\n\nThe error appears to be in '/home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/03-k3s-worker.yml': line 61, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n    - name: Create K3s agent config\n      ^ here\n"}
2026-01-14 21:33:36,336 p=21685 u=laxman n=ansible | fatal: [192.168.0.32]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: {{ hostvars[k3s_master].ansible_host }}: 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_host'. 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_host'. {{ hostvars[k3s_master].ansible_host }}: 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_host'. 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_host'\n\nThe error appears to be in '/home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/03-k3s-worker.yml': line 61, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n    - name: Create K3s agent config\n      ^ here\n"}
2026-01-14 21:33:36,337 p=21685 u=laxman n=ansible | PLAY RECAP ************************************************************************************************************
2026-01-14 21:33:36,338 p=21685 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 21:33:36,338 p=21685 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 21:40:31,448 p=22115 u=laxman n=ansible | PLAY [Setup Kubernetes Worker Nodes (K3s Agent)] **********************************************************************
2026-01-14 21:40:31,459 p=22115 u=laxman n=ansible | TASK [Gathering Facts] ************************************************************************************************
2026-01-14 21:40:33,289 p=22115 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:40:33,311 p=22115 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:40:33,324 p=22115 u=laxman n=ansible | TASK [Allow required K3s worker ports] ********************************************************************************
2026-01-14 21:40:34,081 p=22115 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '10250', 'proto': 'tcp'})
2026-01-14 21:40:34,083 p=22115 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '10250', 'proto': 'tcp'})
2026-01-14 21:40:34,724 p=22115 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '10255', 'proto': 'tcp'})
2026-01-14 21:40:34,735 p=22115 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '10255', 'proto': 'tcp'})
2026-01-14 21:40:35,375 p=22115 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '8472', 'proto': 'udp'})
2026-01-14 21:40:35,381 p=22115 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '8472', 'proto': 'udp'})
2026-01-14 21:40:36,033 p=22115 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '30000:32767', 'proto': 'tcp'})
2026-01-14 21:40:36,038 p=22115 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '30000:32767', 'proto': 'tcp'})
2026-01-14 21:40:36,042 p=22115 u=laxman n=ansible | TASK [Allow loopback traffic] *****************************************************************************************
2026-01-14 21:40:36,690 p=22115 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:40:36,702 p=22115 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:40:36,707 p=22115 u=laxman n=ansible | TASK [Check if K3s agent already installed] ***************************************************************************
2026-01-14 21:40:37,081 p=22115 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:40:37,086 p=22115 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:40:37,089 p=22115 u=laxman n=ansible | TASK [Create K3s configuration directory] *****************************************************************************
2026-01-14 21:40:37,485 p=22115 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:40:37,485 p=22115 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:40:37,490 p=22115 u=laxman n=ansible | TASK [Create K3s agent config] ****************************************************************************************
2026-01-14 21:40:38,216 p=22115 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:40:38,222 p=22115 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:40:38,226 p=22115 u=laxman n=ansible | TASK [Download K3s install script] ************************************************************************************
2026-01-14 21:40:40,115 p=22115 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 21:40:40,271 p=22115 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 21:40:40,278 p=22115 u=laxman n=ansible | TASK [Install K3s agent] **********************************************************************************************
2026-01-14 21:40:51,247 p=22115 u=laxman n=ansible | fatal: [192.168.0.32]: FAILED! => {"changed": true, "cmd": "sh /tmp/install_k3s.sh", "delta": "0:00:11.743195", "end": "2026-01-14 21:40:53.347382", "msg": "non-zero return code", "rc": 1, "start": "2026-01-14 21:40:41.604187", "stderr": "Created symlink /etc/systemd/system/multi-user.target.wants/k3s-agent.service → /etc/systemd/system/k3s-agent.service.\nJob for k3s-agent.service failed because the control process exited with error code.\nSee \"systemctl status k3s-agent.service\" and \"journalctl -xeu k3s-agent.service\" for details.", "stderr_lines": ["Created symlink /etc/systemd/system/multi-user.target.wants/k3s-agent.service → /etc/systemd/system/k3s-agent.service.", "Job for k3s-agent.service failed because the control process exited with error code.", "See \"systemctl status k3s-agent.service\" and \"journalctl -xeu k3s-agent.service\" for details."], "stdout": "[INFO]  Using v1.28.3+k3s1 as release\n[INFO]  Downloading hash https://github.com/k3s-io/k3s/releases/download/v1.28.3+k3s1/sha256sum-amd64.txt\n[INFO]  Downloading binary https://github.com/k3s-io/k3s/releases/download/v1.28.3+k3s1/k3s\n[INFO]  Verifying binary download\n[INFO]  Installing k3s to /usr/local/bin/k3s\n[INFO]  Skipping installation of SELinux RPM\n[INFO]  Creating /usr/local/bin/kubectl symlink to k3s\n[INFO]  Creating /usr/local/bin/crictl symlink to k3s\n[INFO]  Creating /usr/local/bin/ctr symlink to k3s\n[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh\n[INFO]  Creating uninstall script /usr/local/bin/k3s-agent-uninstall.sh\n[INFO]  env: Creating environment file /etc/systemd/system/k3s-agent.service.env\n[INFO]  systemd: Creating service file /etc/systemd/system/k3s-agent.service\n[INFO]  systemd: Enabling k3s-agent unit\n[INFO]  systemd: Starting k3s-agent", "stdout_lines": ["[INFO]  Using v1.28.3+k3s1 as release", "[INFO]  Downloading hash https://github.com/k3s-io/k3s/releases/download/v1.28.3+k3s1/sha256sum-amd64.txt", "[INFO]  Downloading binary https://github.com/k3s-io/k3s/releases/download/v1.28.3+k3s1/k3s", "[INFO]  Verifying binary download", "[INFO]  Installing k3s to /usr/local/bin/k3s", "[INFO]  Skipping installation of SELinux RPM", "[INFO]  Creating /usr/local/bin/kubectl symlink to k3s", "[INFO]  Creating /usr/local/bin/crictl symlink to k3s", "[INFO]  Creating /usr/local/bin/ctr symlink to k3s", "[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh", "[INFO]  Creating uninstall script /usr/local/bin/k3s-agent-uninstall.sh", "[INFO]  env: Creating environment file /etc/systemd/system/k3s-agent.service.env", "[INFO]  systemd: Creating service file /etc/systemd/system/k3s-agent.service", "[INFO]  systemd: Enabling k3s-agent unit", "[INFO]  systemd: Starting k3s-agent"]}
2026-01-14 21:40:51,746 p=22115 u=laxman n=ansible | fatal: [192.168.0.31]: FAILED! => {"changed": true, "cmd": "sh /tmp/install_k3s.sh", "delta": "0:00:12.302613", "end": "2026-01-14 21:40:53.899482", "msg": "non-zero return code", "rc": 1, "start": "2026-01-14 21:40:41.596869", "stderr": "Created symlink /etc/systemd/system/multi-user.target.wants/k3s-agent.service → /etc/systemd/system/k3s-agent.service.\nJob for k3s-agent.service failed because the control process exited with error code.\nSee \"systemctl status k3s-agent.service\" and \"journalctl -xeu k3s-agent.service\" for details.", "stderr_lines": ["Created symlink /etc/systemd/system/multi-user.target.wants/k3s-agent.service → /etc/systemd/system/k3s-agent.service.", "Job for k3s-agent.service failed because the control process exited with error code.", "See \"systemctl status k3s-agent.service\" and \"journalctl -xeu k3s-agent.service\" for details."], "stdout": "[INFO]  Using v1.28.3+k3s1 as release\n[INFO]  Downloading hash https://github.com/k3s-io/k3s/releases/download/v1.28.3+k3s1/sha256sum-amd64.txt\n[INFO]  Downloading binary https://github.com/k3s-io/k3s/releases/download/v1.28.3+k3s1/k3s\n[INFO]  Verifying binary download\n[INFO]  Installing k3s to /usr/local/bin/k3s\n[INFO]  Skipping installation of SELinux RPM\n[INFO]  Creating /usr/local/bin/kubectl symlink to k3s\n[INFO]  Creating /usr/local/bin/crictl symlink to k3s\n[INFO]  Creating /usr/local/bin/ctr symlink to k3s\n[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh\n[INFO]  Creating uninstall script /usr/local/bin/k3s-agent-uninstall.sh\n[INFO]  env: Creating environment file /etc/systemd/system/k3s-agent.service.env\n[INFO]  systemd: Creating service file /etc/systemd/system/k3s-agent.service\n[INFO]  systemd: Enabling k3s-agent unit\n[INFO]  systemd: Starting k3s-agent", "stdout_lines": ["[INFO]  Using v1.28.3+k3s1 as release", "[INFO]  Downloading hash https://github.com/k3s-io/k3s/releases/download/v1.28.3+k3s1/sha256sum-amd64.txt", "[INFO]  Downloading binary https://github.com/k3s-io/k3s/releases/download/v1.28.3+k3s1/k3s", "[INFO]  Verifying binary download", "[INFO]  Installing k3s to /usr/local/bin/k3s", "[INFO]  Skipping installation of SELinux RPM", "[INFO]  Creating /usr/local/bin/kubectl symlink to k3s", "[INFO]  Creating /usr/local/bin/crictl symlink to k3s", "[INFO]  Creating /usr/local/bin/ctr symlink to k3s", "[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh", "[INFO]  Creating uninstall script /usr/local/bin/k3s-agent-uninstall.sh", "[INFO]  env: Creating environment file /etc/systemd/system/k3s-agent.service.env", "[INFO]  systemd: Creating service file /etc/systemd/system/k3s-agent.service", "[INFO]  systemd: Enabling k3s-agent unit", "[INFO]  systemd: Starting k3s-agent"]}
2026-01-14 21:40:51,746 p=22115 u=laxman n=ansible | PLAY RECAP ************************************************************************************************************
2026-01-14 21:40:51,746 p=22115 u=laxman n=ansible | 192.168.0.31               : ok=7    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 21:40:51,747 p=22115 u=laxman n=ansible | 192.168.0.32               : ok=7    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 21:43:46,271 p=22667 u=laxman n=ansible | PLAY [Setup Kubernetes Worker Nodes (K3s Agent)] **********************************************************************
2026-01-14 21:43:46,284 p=22667 u=laxman n=ansible | TASK [Gathering Facts] ************************************************************************************************
2026-01-14 21:43:48,179 p=22667 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:43:48,192 p=22667 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:43:48,203 p=22667 u=laxman n=ansible | TASK [Allow required K3s worker ports] ********************************************************************************
2026-01-14 21:43:48,923 p=22667 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '10250', 'proto': 'tcp'})
2026-01-14 21:43:48,930 p=22667 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '10250', 'proto': 'tcp'})
2026-01-14 21:43:49,582 p=22667 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '10255', 'proto': 'tcp'})
2026-01-14 21:43:49,588 p=22667 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '10255', 'proto': 'tcp'})
2026-01-14 21:43:50,196 p=22667 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '8472', 'proto': 'udp'})
2026-01-14 21:43:50,768 p=22667 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '30000:32767', 'proto': 'tcp'})
2026-01-14 21:43:51,092 p=22667 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '8472', 'proto': 'udp'})
2026-01-14 21:43:51,670 p=22667 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '30000:32767', 'proto': 'tcp'})
2026-01-14 21:43:51,675 p=22667 u=laxman n=ansible | TASK [Allow loopback traffic] *****************************************************************************************
2026-01-14 21:43:52,318 p=22667 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:43:52,326 p=22667 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:43:52,330 p=22667 u=laxman n=ansible | TASK [Check if K3s agent already installed] ***************************************************************************
2026-01-14 21:43:52,795 p=22667 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:43:52,795 p=22667 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:43:52,798 p=22667 u=laxman n=ansible | TASK [Create K3s configuration directory] *****************************************************************************
2026-01-14 21:43:53,193 p=22667 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:43:53,193 p=22667 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:43:53,197 p=22667 u=laxman n=ansible | TASK [Create K3s agent config] ****************************************************************************************
2026-01-14 21:43:53,833 p=22667 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:43:53,833 p=22667 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:43:53,836 p=22667 u=laxman n=ansible | TASK [Download K3s install script] ************************************************************************************
2026-01-14 21:43:53,848 p=22667 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-14 21:43:53,855 p=22667 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-14 21:43:53,861 p=22667 u=laxman n=ansible | TASK [Install K3s agent] **********************************************************************************************
2026-01-14 21:43:53,874 p=22667 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-14 21:43:53,880 p=22667 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-14 21:43:53,884 p=22667 u=laxman n=ansible | TASK [Enable and start K3s agent] *************************************************************************************
2026-01-14 21:43:54,777 p=22667 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 21:43:54,798 p=22667 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 21:43:54,801 p=22667 u=laxman n=ansible | TASK [Wait for worker to appear in cluster] ***************************************************************************
2026-01-14 21:49:44,988 p=22667 u=laxman n=ansible | fatal: [192.168.0.31 -> 192.168.0.30]: FAILED! => {"attempts": 30, "changed": true, "cmd": "kubectl get nodes | grep 192.168.0.31", "delta": "0:00:00.141507", "end": "2026-01-14 21:49:46.868250", "msg": "non-zero return code", "rc": 1, "start": "2026-01-14 21:49:46.726743", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2026-01-14 21:49:44,990 p=22667 u=laxman n=ansible | fatal: [192.168.0.32 -> 192.168.0.30]: FAILED! => {"attempts": 30, "changed": true, "cmd": "kubectl get nodes | grep 192.168.0.32", "delta": "0:00:00.148008", "end": "2026-01-14 21:49:46.880464", "msg": "non-zero return code", "rc": 1, "start": "2026-01-14 21:49:46.732456", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2026-01-14 21:49:44,991 p=22667 u=laxman n=ansible | PLAY RECAP ************************************************************************************************************
2026-01-14 21:49:44,991 p=22667 u=laxman n=ansible | 192.168.0.31               : ok=7    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2026-01-14 21:49:44,991 p=22667 u=laxman n=ansible | 192.168.0.32               : ok=7    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2026-01-14 21:51:29,250 p=24831 u=laxman n=ansible | 192.168.0.32 | SUCCESS => {
    "changed": false,
    "ping": "pong"
}
2026-01-14 21:51:29,286 p=24831 u=laxman n=ansible | 192.168.0.31 | SUCCESS => {
    "changed": false,
    "ping": "pong"
}
2026-01-14 21:51:29,311 p=24831 u=laxman n=ansible | 192.168.0.33 | SUCCESS => {
    "changed": false,
    "ping": "pong"
}
2026-01-14 21:51:29,356 p=24831 u=laxman n=ansible | 192.168.0.30 | SUCCESS => {
    "changed": false,
    "ping": "pong"
}
2026-01-14 21:52:03,980 p=24949 u=laxman n=ansible | PLAY [Setup Kubernetes Master Node (K3s)] *****************************************************************************
2026-01-14 21:52:03,985 p=24949 u=laxman n=ansible | TASK [Gathering Facts] ************************************************************************************************
2026-01-14 21:52:05,065 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:05,074 p=24949 u=laxman n=ansible | TASK [Allow Kubernetes API] *******************************************************************************************
2026-01-14 21:52:05,708 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:05,713 p=24949 u=laxman n=ansible | TASK [Allow Flannel VXLAN] ********************************************************************************************
2026-01-14 21:52:07,182 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:07,186 p=24949 u=laxman n=ansible | TASK [Allow kubelet API] **********************************************************************************************
2026-01-14 21:52:07,753 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:07,758 p=24949 u=laxman n=ansible | TASK [Allow NodePort range] *******************************************************************************************
2026-01-14 21:52:08,333 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:08,336 p=24949 u=laxman n=ansible | TASK [Allow loopback traffic] *****************************************************************************************
2026-01-14 21:52:08,969 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:08,972 p=24949 u=laxman n=ansible | TASK [Check if K3s is already installed] ******************************************************************************
2026-01-14 21:52:09,406 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:09,410 p=24949 u=laxman n=ansible | TASK [Download K3s install script] ************************************************************************************
2026-01-14 21:52:09,418 p=24949 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-14 21:52:09,425 p=24949 u=laxman n=ansible | TASK [Install K3s master] *********************************************************************************************
2026-01-14 21:52:09,435 p=24949 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-14 21:52:09,439 p=24949 u=laxman n=ansible | TASK [Ensure K3s service is running] **********************************************************************************
2026-01-14 21:52:10,015 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:10,018 p=24949 u=laxman n=ansible | TASK [Wait for K3s API] ***********************************************************************************************
2026-01-14 21:52:10,384 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:10,388 p=24949 u=laxman n=ansible | TASK [Verify K3s responds] ********************************************************************************************
2026-01-14 21:52:10,829 p=24949 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:52:10,832 p=24949 u=laxman n=ansible | TASK [Create kubeconfig directory] ************************************************************************************
2026-01-14 21:52:11,190 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:11,197 p=24949 u=laxman n=ansible | TASK [Copy kubeconfig to ansible user] ********************************************************************************
2026-01-14 21:52:11,553 p=24949 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:52:11,556 p=24949 u=laxman n=ansible | TASK [Update kubeconfig server address] *******************************************************************************
2026-01-14 21:52:11,902 p=24949 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:52:11,908 p=24949 u=laxman n=ansible | TASK [Create base namespaces] *****************************************************************************************
2026-01-14 21:52:12,716 p=24949 u=laxman n=ansible | changed: [192.168.0.30] => (item=monitoring)
2026-01-14 21:52:13,198 p=24949 u=laxman n=ansible | changed: [192.168.0.30] => (item=jenkins)
2026-01-14 21:52:13,202 p=24949 u=laxman n=ansible | TASK [Read worker join token] *****************************************************************************************
2026-01-14 21:52:13,546 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:13,551 p=24949 u=laxman n=ansible | TASK [Set worker join token fact] *************************************************************************************
2026-01-14 21:52:13,587 p=24949 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 21:52:13,590 p=24949 u=laxman n=ansible | TASK [Show cluster info] **********************************************************************************************
2026-01-14 21:52:13,987 p=24949 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:52:13,993 p=24949 u=laxman n=ansible | TASK [debug] **********************************************************************************************************
2026-01-14 21:52:14,008 p=24949 u=laxman n=ansible | ok: [192.168.0.30] => {
    "msg": "\u001b[0;32mKubernetes control plane\u001b[0m is running at \u001b[0;33mhttps://127.0.0.1:6443\u001b[0m\n\u001b[0;32mCoreDNS\u001b[0m is running at \u001b[0;33mhttps://127.0.0.1:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\u001b[0m\n\u001b[0;32mMetrics-server\u001b[0m is running at \u001b[0;33mhttps://127.0.0.1:6443/api/v1/namespaces/kube-system/services/https:metrics-server:https/proxy\u001b[0m\n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'."
}
2026-01-14 21:52:14,012 p=24949 u=laxman n=ansible | TASK [Show node list] *************************************************************************************************
2026-01-14 21:52:14,388 p=24949 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 21:52:14,392 p=24949 u=laxman n=ansible | TASK [debug] **********************************************************************************************************
2026-01-14 21:52:14,404 p=24949 u=laxman n=ansible | ok: [192.168.0.30] => {
    "msg": "NAME           STATUS   ROLES                  AGE   VERSION        INTERNAL-IP    EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION     CONTAINER-RUNTIME\n192.168.0.30   Ready    control-plane,master   21m   v1.28.3+k3s1   192.168.0.30   <none>        Ubuntu 24.04.3 LTS   6.8.0-90-generic   containerd://1.7.7-k3s1"
}
2026-01-14 21:52:14,415 p=24949 u=laxman n=ansible | PLAY RECAP ************************************************************************************************************
2026-01-14 21:52:14,415 p=24949 u=laxman n=ansible | 192.168.0.30               : ok=20   changed=6    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2026-01-14 22:00:22,150 p=25714 u=laxman n=ansible | PLAY [Setup Kubernetes Worker Nodes (K3s Agent)] **********************************************************************
2026-01-14 22:00:22,162 p=25714 u=laxman n=ansible | TASK [Gathering Facts] ************************************************************************************************
2026-01-14 22:00:24,025 p=25714 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:00:24,032 p=25714 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:00:24,049 p=25714 u=laxman n=ansible | TASK [Allow required K3s worker ports] ********************************************************************************
2026-01-14 22:00:24,751 p=25714 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '10250', 'proto': 'tcp'})
2026-01-14 22:00:24,759 p=25714 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '10250', 'proto': 'tcp'})
2026-01-14 22:00:25,380 p=25714 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '10255', 'proto': 'tcp'})
2026-01-14 22:00:25,394 p=25714 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '10255', 'proto': 'tcp'})
2026-01-14 22:00:26,016 p=25714 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '8472', 'proto': 'udp'})
2026-01-14 22:00:26,027 p=25714 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '8472', 'proto': 'udp'})
2026-01-14 22:00:26,651 p=25714 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '30000:32767', 'proto': 'tcp'})
2026-01-14 22:00:26,659 p=25714 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '30000:32767', 'proto': 'tcp'})
2026-01-14 22:00:26,664 p=25714 u=laxman n=ansible | TASK [Allow loopback traffic] *****************************************************************************************
2026-01-14 22:00:27,302 p=25714 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:00:27,309 p=25714 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:00:27,314 p=25714 u=laxman n=ansible | TASK [Check if K3s agent already installed] ***************************************************************************
2026-01-14 22:00:27,782 p=25714 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:00:27,783 p=25714 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:00:27,786 p=25714 u=laxman n=ansible | TASK [Create K3s configuration directory] *****************************************************************************
2026-01-14 22:00:28,176 p=25714 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:00:28,178 p=25714 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:00:28,184 p=25714 u=laxman n=ansible | TASK [Create K3s agent config] ****************************************************************************************
2026-01-14 22:00:28,829 p=25714 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:00:28,830 p=25714 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:00:28,833 p=25714 u=laxman n=ansible | TASK [Download K3s install script] ************************************************************************************
2026-01-14 22:00:28,848 p=25714 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-14 22:00:28,855 p=25714 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-14 22:00:28,862 p=25714 u=laxman n=ansible | TASK [Install K3s agent] **********************************************************************************************
2026-01-14 22:00:28,873 p=25714 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-14 22:00:28,878 p=25714 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-14 22:00:28,883 p=25714 u=laxman n=ansible | TASK [Enable and start K3s agent] *************************************************************************************
2026-01-14 22:00:29,802 p=25714 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:00:29,822 p=25714 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:00:29,824 p=25714 u=laxman n=ansible | TASK [Wait for worker to appear in cluster] ***************************************************************************
2026-01-14 22:04:24,887 p=25714 u=laxman n=ansible | fatal: [192.168.0.31 -> 192.168.0.30]: FAILED! => {"attempts": 20, "changed": true, "cmd": "kubectl get nodes | grep 192.168.0.31", "delta": "0:00:00.141356", "end": "2026-01-14 22:04:24.991773", "msg": "non-zero return code", "rc": 1, "start": "2026-01-14 22:04:24.850417", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2026-01-14 22:04:24,905 p=25714 u=laxman n=ansible | fatal: [192.168.0.32 -> 192.168.0.30]: FAILED! => {"attempts": 20, "changed": true, "cmd": "kubectl get nodes | grep 192.168.0.32", "delta": "0:00:00.143222", "end": "2026-01-14 22:04:25.024357", "msg": "non-zero return code", "rc": 1, "start": "2026-01-14 22:04:24.881135", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2026-01-14 22:04:24,906 p=25714 u=laxman n=ansible | PLAY RECAP ************************************************************************************************************
2026-01-14 22:04:24,906 p=25714 u=laxman n=ansible | 192.168.0.31               : ok=7    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2026-01-14 22:04:24,907 p=25714 u=laxman n=ansible | 192.168.0.32               : ok=7    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2026-01-14 22:09:11,363 p=27394 u=laxman n=ansible | PLAY [Setup Kubernetes Worker Nodes (K3s Agent)] **********************************************************************
2026-01-14 22:09:11,372 p=27394 u=laxman n=ansible | TASK [Gathering Facts] ************************************************************************************************
2026-01-14 22:09:13,222 p=27394 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:09:13,223 p=27394 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:09:13,235 p=27394 u=laxman n=ansible | TASK [Allow required K3s worker ports] ********************************************************************************
2026-01-14 22:09:13,922 p=27394 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '10250', 'proto': 'tcp'})
2026-01-14 22:09:14,488 p=27394 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '10255', 'proto': 'tcp'})
2026-01-14 22:09:14,848 p=27394 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '10250', 'proto': 'tcp'})
2026-01-14 22:09:15,096 p=27394 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '8472', 'proto': 'udp'})
2026-01-14 22:09:15,482 p=27394 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '10255', 'proto': 'tcp'})
2026-01-14 22:09:15,724 p=27394 u=laxman n=ansible | ok: [192.168.0.31] => (item={'port': '30000:32767', 'proto': 'tcp'})
2026-01-14 22:09:16,078 p=27394 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '8472', 'proto': 'udp'})
2026-01-14 22:09:16,643 p=27394 u=laxman n=ansible | ok: [192.168.0.32] => (item={'port': '30000:32767', 'proto': 'tcp'})
2026-01-14 22:09:16,647 p=27394 u=laxman n=ansible | TASK [Allow loopback traffic] *****************************************************************************************
2026-01-14 22:09:17,292 p=27394 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:09:17,308 p=27394 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:09:17,314 p=27394 u=laxman n=ansible | TASK [Get worker join token from master] ******************************************************************************
2026-01-14 22:09:18,372 p=27394 u=laxman n=ansible | changed: [192.168.0.31 -> 192.168.0.30]
2026-01-14 22:09:18,378 p=27394 u=laxman n=ansible | TASK [set_fact] *******************************************************************************************************
2026-01-14 22:09:18,390 p=27394 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:09:18,395 p=27394 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:09:18,399 p=27394 u=laxman n=ansible | TASK [Check if K3s agent already installed] ***************************************************************************
2026-01-14 22:09:18,863 p=27394 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:09:18,867 p=27394 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:09:18,869 p=27394 u=laxman n=ansible | TASK [Create K3s configuration directory] *****************************************************************************
2026-01-14 22:09:19,264 p=27394 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:09:19,277 p=27394 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:09:19,283 p=27394 u=laxman n=ansible | TASK [Create K3s agent config] ****************************************************************************************
2026-01-14 22:09:19,980 p=27394 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 22:09:19,984 p=27394 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 22:09:19,987 p=27394 u=laxman n=ansible | TASK [Download K3s install script] ************************************************************************************
2026-01-14 22:09:20,002 p=27394 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-14 22:09:20,008 p=27394 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-14 22:09:20,014 p=27394 u=laxman n=ansible | TASK [Install K3s agent] **********************************************************************************************
2026-01-14 22:09:20,026 p=27394 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-14 22:09:20,032 p=27394 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-14 22:09:20,037 p=27394 u=laxman n=ansible | TASK [Enable and start K3s agent] *************************************************************************************
2026-01-14 22:09:20,930 p=27394 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:09:20,952 p=27394 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:09:20,955 p=27394 u=laxman n=ansible | TASK [Wait for worker to appear in cluster] ***************************************************************************
2026-01-14 22:09:31,846 p=27394 u=laxman n=ansible | changed: [192.168.0.32 -> 192.168.0.30]
2026-01-14 22:09:31,861 p=27394 u=laxman n=ansible | changed: [192.168.0.31 -> 192.168.0.30]
2026-01-14 22:09:31,864 p=27394 u=laxman n=ansible | TASK [Label worker node] **********************************************************************************************
2026-01-14 22:09:32,335 p=27394 u=laxman n=ansible | changed: [192.168.0.31 -> 192.168.0.30]
2026-01-14 22:09:32,363 p=27394 u=laxman n=ansible | changed: [192.168.0.32 -> 192.168.0.30]
2026-01-14 22:09:32,367 p=27394 u=laxman n=ansible | TASK [Check K3s agent service status] *********************************************************************************
2026-01-14 22:09:32,847 p=27394 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:09:32,856 p=27394 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:09:32,863 p=27394 u=laxman n=ansible | TASK [Display agent status] *******************************************************************************************
2026-01-14 22:09:32,878 p=27394 u=laxman n=ansible | ok: [192.168.0.31] => {
    "msg": "K3s Agent on 192.168.0.31 is active"
}
2026-01-14 22:09:32,884 p=27394 u=laxman n=ansible | ok: [192.168.0.32] => {
    "msg": "K3s Agent on 192.168.0.32 is active"
}
2026-01-14 22:09:32,888 p=27394 u=laxman n=ansible | TASK [Show recent K3s agent logs] *************************************************************************************
2026-01-14 22:09:33,222 p=27394 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 22:09:33,232 p=27394 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 22:09:33,235 p=27394 u=laxman n=ansible | TASK [debug] **********************************************************************************************************
2026-01-14 22:09:33,250 p=27394 u=laxman n=ansible | ok: [192.168.0.31] => {
    "msg": "Jan 14 22:09:28 192.168.0.31 k3s[16781]: I0114 22:09:28.790362   16781 kube.go:510] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.42.2.0/24]\nJan 14 22:09:28 192.168.0.31 k3s[16781]: time=\"2026-01-14T22:09:28Z\" level=info msg=\"Wrote flannel subnet file to /run/flannel/subnet.env\"\nJan 14 22:09:28 192.168.0.31 k3s[16781]: time=\"2026-01-14T22:09:28Z\" level=info msg=\"Running flannel backend.\"\nJan 14 22:09:28 192.168.0.31 k3s[16781]: I0114 22:09:28.795958   16781 vxlan_network.go:65] watching for new subnet leases\nJan 14 22:09:28 192.168.0.31 k3s[16781]: I0114 22:09:28.795981   16781 subnet.go:159] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa2a0000, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xc0a8001e, PublicIPv6:(*ip.IP6)(nil), BackendType:\"vxlan\", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x65, 0x65, 0x3a, 0x65, 0x35, 0x3a, 0x38, 0x35, 0x3a, 0x33, 0x36, 0x3a, 0x33, 0x39, 0x3a, 0x39, 0x36, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }\nJan 14 22:09:28 192.168.0.31 k3s[16781]: I0114 22:09:28.796029   16781 subnet.go:159] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa2a0100, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xc0a80020, PublicIPv6:(*ip.IP6)(nil), BackendType:\"vxlan\", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x32, 0x65, 0x3a, 0x39, 0x39, 0x3a, 0x38, 0x38, 0x3a, 0x63, 0x34, 0x3a, 0x31, 0x65, 0x3a, 0x33, 0x65, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }\nJan 14 22:09:28 192.168.0.31 k3s[16781]: I0114 22:09:28.796047   16781 iptables.go:290] generated 3 rules\nJan 14 22:09:28 192.168.0.31 k3s[16781]: I0114 22:09:28.797021   16781 iptables.go:290] generated 7 rules\nJan 14 22:09:28 192.168.0.31 k3s[16781]: I0114 22:09:28.827285   16781 iptables.go:283] bootstrap done\nJan 14 22:09:28 192.168.0.31 k3s[16781]: I0114 22:09:28.827592   16781 iptables.go:283] bootstrap done"
}
2026-01-14 22:09:33,256 p=27394 u=laxman n=ansible | ok: [192.168.0.32] => {
    "msg": "Jan 14 22:09:28 192.168.0.32 k3s[16744]: time=\"2026-01-14T22:09:28Z\" level=info msg=\"Wrote flannel subnet file to /run/flannel/subnet.env\"\nJan 14 22:09:28 192.168.0.32 k3s[16744]: time=\"2026-01-14T22:09:28Z\" level=info msg=\"Running flannel backend.\"\nJan 14 22:09:28 192.168.0.32 k3s[16744]: I0114 22:09:28.309020   16744 vxlan_network.go:65] watching for new subnet leases\nJan 14 22:09:28 192.168.0.32 k3s[16744]: I0114 22:09:28.309039   16744 subnet.go:159] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa2a0000, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xc0a8001e, PublicIPv6:(*ip.IP6)(nil), BackendType:\"vxlan\", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x65, 0x65, 0x3a, 0x65, 0x35, 0x3a, 0x38, 0x35, 0x3a, 0x33, 0x36, 0x3a, 0x33, 0x39, 0x3a, 0x39, 0x36, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }\nJan 14 22:09:28 192.168.0.32 k3s[16744]: I0114 22:09:28.309093   16744 iptables.go:290] generated 3 rules\nJan 14 22:09:28 192.168.0.32 k3s[16744]: I0114 22:09:28.310064   16744 iptables.go:290] generated 7 rules\nJan 14 22:09:28 192.168.0.32 k3s[16744]: I0114 22:09:28.337491   16744 iptables.go:283] bootstrap done\nJan 14 22:09:28 192.168.0.32 k3s[16744]: I0114 22:09:28.337810   16744 iptables.go:283] bootstrap done\nJan 14 22:09:28 192.168.0.32 k3s[16744]: I0114 22:09:28.794644   16744 kube.go:510] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.42.2.0/24]\nJan 14 22:09:28 192.168.0.32 k3s[16744]: I0114 22:09:28.794687   16744 subnet.go:159] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa2a0200, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xc0a8001f, PublicIPv6:(*ip.IP6)(nil), BackendType:\"vxlan\", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x65, 0x32, 0x3a, 0x63, 0x38, 0x3a, 0x65, 0x33, 0x3a, 0x34, 0x31, 0x3a, 0x62, 0x32, 0x3a, 0x32, 0x32, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }"
}
2026-01-14 22:09:33,282 p=27394 u=laxman n=ansible | PLAY RECAP ************************************************************************************************************
2026-01-14 22:09:33,283 p=27394 u=laxman n=ansible | 192.168.0.31               : ok=15   changed=5    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2026-01-14 22:09:33,283 p=27394 u=laxman n=ansible | 192.168.0.32               : ok=14   changed=4    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2026-01-14 22:11:08,614 p=28005 u=laxman n=ansible | PLAY [Setup Docker-based CI/CD Stack] *********************************************************************************
2026-01-14 22:11:08,625 p=28005 u=laxman n=ansible | TASK [Gathering Facts] ************************************************************************************************
2026-01-14 22:11:10,383 p=28005 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:11:10,390 p=28005 u=laxman n=ansible | TASK [Install Docker dependencies] ************************************************************************************
2026-01-14 22:11:13,069 p=28005 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:11:13,072 p=28005 u=laxman n=ansible | TASK [Add Docker GPG key] *********************************************************************************************
2026-01-14 22:11:14,052 p=28005 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 22:11:14,055 p=28005 u=laxman n=ansible | TASK [Add Docker repository] ******************************************************************************************
2026-01-14 22:11:19,424 p=28005 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 22:11:19,428 p=28005 u=laxman n=ansible | TASK [Install Docker Engine and CLI] **********************************************************************************
2026-01-14 22:11:38,369 p=28005 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 22:11:38,373 p=28005 u=laxman n=ansible | TASK [Ensure Docker is running] ***************************************************************************************
2026-01-14 22:11:38,976 p=28005 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:11:38,980 p=28005 u=laxman n=ansible | TASK [Add ubuntu user to docker group] ********************************************************************************
2026-01-14 22:11:39,452 p=28005 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 22:11:39,455 p=28005 u=laxman n=ansible | TASK [Create persistent directories for Jenkins and Nexus] ************************************************************
2026-01-14 22:11:39,813 p=28005 u=laxman n=ansible | changed: [192.168.0.33] => (item=/opt/jenkins)
2026-01-14 22:11:40,123 p=28005 u=laxman n=ansible | changed: [192.168.0.33] => (item=/opt/nexus)
2026-01-14 22:11:40,419 p=28005 u=laxman n=ansible | changed: [192.168.0.33] => (item=/opt/jenkins/.kube)
2026-01-14 22:11:40,423 p=28005 u=laxman n=ansible | TASK [Create CI/CD Docker network] ************************************************************************************
2026-01-14 22:11:41,039 p=28005 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 22:11:41,046 p=28005 u=laxman n=ansible | TASK [Fetch kubeconfig from K3s master] *******************************************************************************
2026-01-14 22:11:42,115 p=28005 u=laxman n=ansible | changed: [192.168.0.33 -> 192.168.0.30]
2026-01-14 22:11:42,118 p=28005 u=laxman n=ansible | TASK [Update kubeconfig server IP to match master node] ***************************************************************
2026-01-14 22:11:42,466 p=28005 u=laxman n=ansible | fatal: [192.168.0.33]: FAILED! => {"changed": false, "msg": "Destination /tmp/k3s-master-kubeconfig.yaml does not exist !", "rc": 257}
2026-01-14 22:11:42,466 p=28005 u=laxman n=ansible | PLAY RECAP ************************************************************************************************************
2026-01-14 22:11:42,466 p=28005 u=laxman n=ansible | 192.168.0.33               : ok=10   changed=7    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 22:19:45,757 p=28580 u=laxman n=ansible | PLAY [Setup Docker-based CI/CD Stack] *********************************************************************************
2026-01-14 22:19:45,770 p=28580 u=laxman n=ansible | TASK [Gathering Facts] ************************************************************************************************
2026-01-14 22:19:47,584 p=28580 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:19:47,591 p=28580 u=laxman n=ansible | TASK [Install Docker dependencies] ************************************************************************************
2026-01-14 22:19:51,875 p=28580 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:19:51,879 p=28580 u=laxman n=ansible | TASK [Add Docker GPG key] *********************************************************************************************
2026-01-14 22:19:52,544 p=28580 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:19:52,549 p=28580 u=laxman n=ansible | TASK [Add Docker repository] ******************************************************************************************
2026-01-14 22:19:53,052 p=28580 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:19:53,056 p=28580 u=laxman n=ansible | TASK [Install Docker Engine and CLI] **********************************************************************************
2026-01-14 22:19:54,025 p=28580 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:19:54,027 p=28580 u=laxman n=ansible | TASK [Ensure Docker is running] ***************************************************************************************
2026-01-14 22:19:54,637 p=28580 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:19:54,641 p=28580 u=laxman n=ansible | TASK [Add ubuntu user to docker group] ********************************************************************************
2026-01-14 22:19:55,098 p=28580 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:19:55,103 p=28580 u=laxman n=ansible | TASK [Create persistent directories for Jenkins and Nexus] ************************************************************
2026-01-14 22:19:55,479 p=28580 u=laxman n=ansible | ok: [192.168.0.33] => (item=/opt/jenkins)
2026-01-14 22:19:55,775 p=28580 u=laxman n=ansible | ok: [192.168.0.33] => (item=/opt/nexus)
2026-01-14 22:19:56,062 p=28580 u=laxman n=ansible | ok: [192.168.0.33] => (item=/opt/jenkins/.kube)
2026-01-14 22:19:56,066 p=28580 u=laxman n=ansible | TASK [Create CI/CD Docker network] ************************************************************************************
2026-01-14 22:19:56,623 p=28580 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:19:56,627 p=28580 u=laxman n=ansible | TASK [Read kubeconfig from K3s master] ********************************************************************************
2026-01-14 22:19:57,722 p=28580 u=laxman n=ansible | ok: [192.168.0.33 -> 192.168.0.30]
2026-01-14 22:19:57,729 p=28580 u=laxman n=ansible | TASK [Write kubeconfig to Jenkins host] *******************************************************************************
2026-01-14 22:19:58,469 p=28580 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 22:19:58,474 p=28580 u=laxman n=ansible | TASK [Start Jenkins container] ****************************************************************************************
2026-01-14 22:20:26,239 p=28580 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 22:20:26,243 p=28580 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *******************************************************************************
2026-01-14 22:25:10,197 p=28580 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:25:10,201 p=28580 u=laxman n=ansible | TASK [Start Nexus container] ******************************************************************************************
2026-01-14 22:25:44,365 p=28580 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 22:25:44,370 p=28580 u=laxman n=ansible | TASK [Wait for Nexus to be available] *********************************************************************************
2026-01-14 22:25:44,721 p=28580 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:25:44,725 p=28580 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] ************************************************************
2026-01-14 22:25:45,636 p=28580 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-14 22:25:46,480 p=28580 u=laxman n=ansible | changed: [192.168.0.33] => (item=8080)
2026-01-14 22:25:47,272 p=28580 u=laxman n=ansible | changed: [192.168.0.33] => (item=8081)
2026-01-14 22:25:48,009 p=28580 u=laxman n=ansible | changed: [192.168.0.33] => (item=5000)
2026-01-14 22:25:48,014 p=28580 u=laxman n=ansible | TASK [Enable UFW safely] **********************************************************************************************
2026-01-14 22:25:50,074 p=28580 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:25:50,086 p=28580 u=laxman n=ansible | PLAY [Configure all K3s nodes to trust Nexus Docker registry] *********************************************************
2026-01-14 22:25:50,088 p=28580 u=laxman n=ansible | TASK [Gathering Facts] ************************************************************************************************
2026-01-14 22:25:52,501 p=28580 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:25:52,516 p=28580 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:25:52,586 p=28580 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 22:25:52,602 p=28580 u=laxman n=ansible | TASK [Ensure containerd config directory exists] **********************************************************************
2026-01-14 22:25:53,023 p=28580 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 22:25:53,068 p=28580 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 22:25:53,100 p=28580 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 22:25:53,104 p=28580 u=laxman n=ansible | TASK [Backup containerd config] ***************************************************************************************
2026-01-14 22:25:53,573 p=28580 u=laxman n=ansible | fatal: [192.168.0.31]: FAILED! => {"changed": false, "msg": "Source /etc/containerd/config.toml not found"}
2026-01-14 22:25:53,574 p=28580 u=laxman n=ansible | ...ignoring
2026-01-14 22:25:53,608 p=28580 u=laxman n=ansible | fatal: [192.168.0.32]: FAILED! => {"changed": false, "msg": "Source /etc/containerd/config.toml not found"}
2026-01-14 22:25:53,608 p=28580 u=laxman n=ansible | ...ignoring
2026-01-14 22:25:53,710 p=28580 u=laxman n=ansible | fatal: [192.168.0.30]: FAILED! => {"changed": false, "msg": "Source /etc/containerd/config.toml not found"}
2026-01-14 22:25:53,710 p=28580 u=laxman n=ansible | ...ignoring
2026-01-14 22:25:53,715 p=28580 u=laxman n=ansible | TASK [Configure Nexus registry as insecure (HTTP) mirror] *************************************************************
2026-01-14 22:25:54,189 p=28580 u=laxman n=ansible | fatal: [192.168.0.32]: FAILED! => {"changed": false, "msg": "Path /etc/containerd/config.toml does not exist !", "rc": 257}
2026-01-14 22:25:54,251 p=28580 u=laxman n=ansible | fatal: [192.168.0.30]: FAILED! => {"changed": false, "msg": "Path /etc/containerd/config.toml does not exist !", "rc": 257}
2026-01-14 22:25:54,293 p=28580 u=laxman n=ansible | fatal: [192.168.0.31]: FAILED! => {"changed": false, "msg": "Path /etc/containerd/config.toml does not exist !", "rc": 257}
2026-01-14 22:25:54,293 p=28580 u=laxman n=ansible | PLAY RECAP ************************************************************************************************************
2026-01-14 22:25:54,294 p=28580 u=laxman n=ansible | 192.168.0.30               : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2026-01-14 22:25:54,294 p=28580 u=laxman n=ansible | 192.168.0.31               : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2026-01-14 22:25:54,294 p=28580 u=laxman n=ansible | 192.168.0.32               : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2026-01-14 22:25:54,294 p=28580 u=laxman n=ansible | 192.168.0.33               : ok=17   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-14 22:33:13,579 p=30059 u=laxman n=ansible | PLAY [Setup Docker-based CI/CD Stack] ***********************************************************************************
2026-01-14 22:33:13,591 p=30059 u=laxman n=ansible | TASK [Gathering Facts] **************************************************************************************************
2026-01-14 22:33:15,518 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:33:15,526 p=30059 u=laxman n=ansible | TASK [Install Docker dependencies] **************************************************************************************
2026-01-14 22:33:18,006 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:33:18,009 p=30059 u=laxman n=ansible | TASK [Add Docker GPG key] ***********************************************************************************************
2026-01-14 22:33:18,787 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:33:18,792 p=30059 u=laxman n=ansible | TASK [Add Docker repository] ********************************************************************************************
2026-01-14 22:33:19,371 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:33:19,375 p=30059 u=laxman n=ansible | TASK [Install Docker Engine and CLI] ************************************************************************************
2026-01-14 22:33:20,398 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:33:20,402 p=30059 u=laxman n=ansible | TASK [Ensure Docker is running] *****************************************************************************************
2026-01-14 22:33:21,020 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:33:21,024 p=30059 u=laxman n=ansible | TASK [Add ubuntu user to docker group] **********************************************************************************
2026-01-14 22:33:21,487 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:33:21,490 p=30059 u=laxman n=ansible | TASK [Create persistent directories for Jenkins and Nexus] **************************************************************
2026-01-14 22:33:21,900 p=30059 u=laxman n=ansible | changed: [192.168.0.33] => (item={'path': '/opt/jenkins', 'mode': '0755', 'owner': 1000, 'group': 1000})
2026-01-14 22:33:22,208 p=30059 u=laxman n=ansible | changed: [192.168.0.33] => (item={'path': '/opt/nexus', 'mode': '0755', 'owner': 1000, 'group': 1000})
2026-01-14 22:33:22,527 p=30059 u=laxman n=ansible | changed: [192.168.0.33] => (item={'path': '/opt/jenkins/.kube', 'mode': '0755', 'owner': 1000, 'group': 1000})
2026-01-14 22:33:22,531 p=30059 u=laxman n=ansible | TASK [Create CI/CD Docker network] **************************************************************************************
2026-01-14 22:33:23,124 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:33:23,127 p=30059 u=laxman n=ansible | TASK [Read kubeconfig from K3s master] **********************************************************************************
2026-01-14 22:33:24,267 p=30059 u=laxman n=ansible | ok: [192.168.0.33 -> 192.168.0.30]
2026-01-14 22:33:24,274 p=30059 u=laxman n=ansible | TASK [Write kubeconfig to Jenkins host] *********************************************************************************
2026-01-14 22:33:24,993 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:33:24,996 p=30059 u=laxman n=ansible | TASK [Start Jenkins container] ******************************************************************************************
2026-01-14 22:33:25,787 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:33:25,792 p=30059 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *********************************************************************************
2026-01-14 22:34:13,045 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:34:13,048 p=30059 u=laxman n=ansible | TASK [Start Nexus container] ********************************************************************************************
2026-01-14 22:34:14,039 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:34:14,044 p=30059 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***********************************************************************************
2026-01-14 22:34:14,512 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:34:14,517 p=30059 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] **************************************************************
2026-01-14 22:34:15,411 p=30059 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-14 22:34:16,190 p=30059 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-14 22:34:17,027 p=30059 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-14 22:34:17,794 p=30059 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-14 22:34:17,799 p=30059 u=laxman n=ansible | TASK [Enable UFW safely] ************************************************************************************************
2026-01-14 22:34:20,036 p=30059 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:34:20,049 p=30059 u=laxman n=ansible | PLAY [Configure all K3s nodes to trust Nexus Docker registry] ***********************************************************
2026-01-14 22:34:20,051 p=30059 u=laxman n=ansible | TASK [Gathering Facts] **************************************************************************************************
2026-01-14 22:34:21,674 p=30059 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 22:34:22,407 p=30059 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:34:23,086 p=30059 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:34:23,111 p=30059 u=laxman n=ansible | TASK [Ensure containerd config directory exists] ************************************************************************
2026-01-14 22:34:23,575 p=30059 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:34:23,601 p=30059 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:34:23,667 p=30059 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 22:34:23,674 p=30059 u=laxman n=ansible | TASK [Create default containerd config if missing] **********************************************************************
2026-01-14 22:34:24,135 p=30059 u=laxman n=ansible | fatal: [192.168.0.31]: FAILED! => {"changed": false, "cmd": "containerd config default '>' /etc/containerd/config.toml", "msg": "[Errno 2] No such file or directory: b'containerd'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2026-01-14 22:34:24,145 p=30059 u=laxman n=ansible | fatal: [192.168.0.32]: FAILED! => {"changed": false, "cmd": "containerd config default '>' /etc/containerd/config.toml", "msg": "[Errno 2] No such file or directory: b'containerd'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2026-01-14 22:34:24,165 p=30059 u=laxman n=ansible | fatal: [192.168.0.30]: FAILED! => {"changed": false, "cmd": "containerd config default '>' /etc/containerd/config.toml", "msg": "[Errno 2] No such file or directory: b'containerd'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2026-01-14 22:34:24,166 p=30059 u=laxman n=ansible | PLAY RECAP **************************************************************************************************************
2026-01-14 22:34:24,166 p=30059 u=laxman n=ansible | 192.168.0.30               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 22:34:24,166 p=30059 u=laxman n=ansible | 192.168.0.31               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 22:34:24,166 p=30059 u=laxman n=ansible | 192.168.0.32               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 22:34:24,166 p=30059 u=laxman n=ansible | 192.168.0.33               : ok=17   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-14 22:41:14,903 p=30840 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *************************************************************************************
2026-01-14 22:41:14,916 p=30840 u=laxman n=ansible | TASK [Gathering Facts] **************************************************************************************************
2026-01-14 22:41:18,009 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:18,018 p=30840 u=laxman n=ansible | TASK [Install Docker dependencies] **************************************************************************************
2026-01-14 22:41:20,938 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:20,943 p=30840 u=laxman n=ansible | TASK [Add Docker GPG key] ***********************************************************************************************
2026-01-14 22:41:21,681 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:21,685 p=30840 u=laxman n=ansible | TASK [Add Docker repository] ********************************************************************************************
2026-01-14 22:41:22,197 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:22,201 p=30840 u=laxman n=ansible | TASK [Install Docker Engine and CLI] ************************************************************************************
2026-01-14 22:41:23,173 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:23,178 p=30840 u=laxman n=ansible | TASK [Ensure Docker is running] *****************************************************************************************
2026-01-14 22:41:23,775 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:23,778 p=30840 u=laxman n=ansible | TASK [Add ubuntu user to docker group] **********************************************************************************
2026-01-14 22:41:24,213 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:24,216 p=30840 u=laxman n=ansible | TASK [Create persistent directories] ************************************************************************************
2026-01-14 22:41:24,583 p=30840 u=laxman n=ansible | ok: [192.168.0.33] => (item={'path': '/opt/jenkins', 'mode': '0755', 'owner': 1000, 'group': 1000})
2026-01-14 22:41:24,901 p=30840 u=laxman n=ansible | changed: [192.168.0.33] => (item={'path': '/opt/nexus', 'mode': '0755', 'owner': 200, 'group': 200})
2026-01-14 22:41:25,219 p=30840 u=laxman n=ansible | ok: [192.168.0.33] => (item={'path': '/opt/jenkins/.kube', 'mode': '0755', 'owner': 1000, 'group': 1000})
2026-01-14 22:41:25,224 p=30840 u=laxman n=ansible | TASK [Create CI/CD Docker network] **************************************************************************************
2026-01-14 22:41:25,816 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:25,819 p=30840 u=laxman n=ansible | TASK [Read kubeconfig from K3s master] **********************************************************************************
2026-01-14 22:41:26,984 p=30840 u=laxman n=ansible | ok: [192.168.0.33 -> 192.168.0.30]
2026-01-14 22:41:26,989 p=30840 u=laxman n=ansible | TASK [Write kubeconfig to Jenkins host] *********************************************************************************
2026-01-14 22:41:27,705 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:27,708 p=30840 u=laxman n=ansible | TASK [Start Jenkins container] ******************************************************************************************
2026-01-14 22:41:28,484 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:28,487 p=30840 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *********************************************************************************
2026-01-14 22:41:28,883 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:28,888 p=30840 u=laxman n=ansible | TASK [Start Nexus container] ********************************************************************************************
2026-01-14 22:41:29,525 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:29,528 p=30840 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***********************************************************************************
2026-01-14 22:41:38,584 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:38,589 p=30840 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] **************************************************************
2026-01-14 22:41:39,455 p=30840 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-14 22:41:40,236 p=30840 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-14 22:41:40,982 p=30840 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-14 22:41:41,765 p=30840 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-14 22:41:41,769 p=30840 u=laxman n=ansible | TASK [Enable UFW safely] ************************************************************************************************
2026-01-14 22:41:43,922 p=30840 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 22:41:43,935 p=30840 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] ***************************************************************
2026-01-14 22:41:43,937 p=30840 u=laxman n=ansible | TASK [Gathering Facts] **************************************************************************************************
2026-01-14 22:41:45,481 p=30840 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 22:41:46,395 p=30840 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:41:46,571 p=30840 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:41:46,589 p=30840 u=laxman n=ansible | TASK [Ensure containerd config directory exists] ************************************************************************
2026-01-14 22:41:47,091 p=30840 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 22:41:47,094 p=30840 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 22:41:47,095 p=30840 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 22:41:47,102 p=30840 u=laxman n=ansible | TASK [Create default containerd config if missing] **********************************************************************
2026-01-14 22:41:47,611 p=30840 u=laxman n=ansible | fatal: [192.168.0.32]: FAILED! => {"changed": false, "cmd": "containerd config default '>' /etc/containerd/config.toml", "msg": "[Errno 2] No such file or directory: b'containerd'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2026-01-14 22:41:47,611 p=30840 u=laxman n=ansible | ...ignoring
2026-01-14 22:41:47,653 p=30840 u=laxman n=ansible | fatal: [192.168.0.30]: FAILED! => {"changed": false, "cmd": "containerd config default '>' /etc/containerd/config.toml", "msg": "[Errno 2] No such file or directory: b'containerd'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2026-01-14 22:41:47,654 p=30840 u=laxman n=ansible | ...ignoring
2026-01-14 22:41:47,774 p=30840 u=laxman n=ansible | fatal: [192.168.0.31]: FAILED! => {"changed": false, "cmd": "containerd config default '>' /etc/containerd/config.toml", "msg": "[Errno 2] No such file or directory: b'containerd'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2026-01-14 22:41:47,774 p=30840 u=laxman n=ansible | ...ignoring
2026-01-14 22:41:47,779 p=30840 u=laxman n=ansible | TASK [Backup containerd config] *****************************************************************************************
2026-01-14 22:41:48,273 p=30840 u=laxman n=ansible | fatal: [192.168.0.32]: FAILED! => {"changed": false, "msg": "Source /etc/containerd/config.toml not found"}
2026-01-14 22:41:48,273 p=30840 u=laxman n=ansible | ...ignoring
2026-01-14 22:41:48,302 p=30840 u=laxman n=ansible | fatal: [192.168.0.30]: FAILED! => {"changed": false, "msg": "Source /etc/containerd/config.toml not found"}
2026-01-14 22:41:48,302 p=30840 u=laxman n=ansible | ...ignoring
2026-01-14 22:41:48,324 p=30840 u=laxman n=ansible | fatal: [192.168.0.31]: FAILED! => {"changed": false, "msg": "Source /etc/containerd/config.toml not found"}
2026-01-14 22:41:48,324 p=30840 u=laxman n=ansible | ...ignoring
2026-01-14 22:41:48,328 p=30840 u=laxman n=ansible | TASK [Configure Nexus registry as insecure mirror] **********************************************************************
2026-01-14 22:41:48,892 p=30840 u=laxman n=ansible | fatal: [192.168.0.31]: FAILED! => {"changed": false, "msg": "Path /etc/containerd/config.toml does not exist !", "rc": 257}
2026-01-14 22:41:48,915 p=30840 u=laxman n=ansible | fatal: [192.168.0.32]: FAILED! => {"changed": false, "msg": "Path /etc/containerd/config.toml does not exist !", "rc": 257}
2026-01-14 22:41:48,926 p=30840 u=laxman n=ansible | fatal: [192.168.0.30]: FAILED! => {"changed": false, "msg": "Path /etc/containerd/config.toml does not exist !", "rc": 257}
2026-01-14 22:41:48,927 p=30840 u=laxman n=ansible | PLAY RECAP **************************************************************************************************************
2026-01-14 22:41:48,927 p=30840 u=laxman n=ansible | 192.168.0.30               : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=2   
2026-01-14 22:41:48,927 p=30840 u=laxman n=ansible | 192.168.0.31               : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=2   
2026-01-14 22:41:48,928 p=30840 u=laxman n=ansible | 192.168.0.32               : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=2   
2026-01-14 22:41:48,928 p=30840 u=laxman n=ansible | 192.168.0.33               : ok=17   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-14 22:59:04,210 p=32063 u=laxman n=ansible | ERROR! conflicting action statements: blockinfile, create

The error appears to be in '/home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/04-jenkins-nexus.yml': line 472, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


    - name: Create or update registries.yaml to trust Nexus registry
      ^ here

2026-01-14 23:02:59,864 p=32202 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *************************************************************************************
2026-01-14 23:02:59,875 p=32202 u=laxman n=ansible | TASK [Gathering Facts] **************************************************************************************************
2026-01-14 23:03:01,901 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:01,912 p=32202 u=laxman n=ansible | TASK [Install Docker dependencies] **************************************************************************************
2026-01-14 23:03:04,727 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:04,732 p=32202 u=laxman n=ansible | TASK [Add Docker GPG key] ***********************************************************************************************
2026-01-14 23:03:05,469 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:05,473 p=32202 u=laxman n=ansible | TASK [Add Docker repository] ********************************************************************************************
2026-01-14 23:03:06,026 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:06,030 p=32202 u=laxman n=ansible | TASK [Install Docker Engine and CLI] ************************************************************************************
2026-01-14 23:03:07,091 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:07,095 p=32202 u=laxman n=ansible | TASK [Ensure Docker is running] *****************************************************************************************
2026-01-14 23:03:07,749 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:07,752 p=32202 u=laxman n=ansible | TASK [Add ansible user to docker group] *********************************************************************************
2026-01-14 23:03:08,254 p=32202 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-14 23:03:08,259 p=32202 u=laxman n=ansible | TASK [Create Jenkins directory with correct owner] **********************************************************************
2026-01-14 23:03:08,656 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:08,660 p=32202 u=laxman n=ansible | TASK [Create Nexus directory with correct owner] ************************************************************************
2026-01-14 23:03:08,997 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:09,001 p=32202 u=laxman n=ansible | TASK [Create Jenkins .kube directory] ***********************************************************************************
2026-01-14 23:03:09,334 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:09,338 p=32202 u=laxman n=ansible | TASK [Create CI/CD Docker network] **************************************************************************************
2026-01-14 23:03:09,958 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:09,961 p=32202 u=laxman n=ansible | TASK [Read kubeconfig from K3s master] **********************************************************************************
2026-01-14 23:03:11,176 p=32202 u=laxman n=ansible | ok: [192.168.0.33 -> 192.168.0.30]
2026-01-14 23:03:11,183 p=32202 u=laxman n=ansible | TASK [Write kubeconfig to Jenkins host] *********************************************************************************
2026-01-14 23:03:11,889 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:11,893 p=32202 u=laxman n=ansible | TASK [Start Jenkins container] ******************************************************************************************
2026-01-14 23:03:12,721 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:12,725 p=32202 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *********************************************************************************
2026-01-14 23:03:13,143 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:13,148 p=32202 u=laxman n=ansible | TASK [Start Nexus container] ********************************************************************************************
2026-01-14 23:03:13,825 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:13,829 p=32202 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***********************************************************************************
2026-01-14 23:03:14,159 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:14,162 p=32202 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] **************************************************************
2026-01-14 23:03:14,908 p=32202 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-14 23:03:15,555 p=32202 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-14 23:03:16,192 p=32202 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-14 23:03:16,817 p=32202 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-14 23:03:16,822 p=32202 u=laxman n=ansible | TASK [Enable UFW safely] ************************************************************************************************
2026-01-14 23:03:18,737 p=32202 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:03:18,754 p=32202 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] ***************************************************************
2026-01-14 23:03:18,756 p=32202 u=laxman n=ansible | TASK [Gathering Facts] **************************************************************************************************
2026-01-14 23:03:19,942 p=32202 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:03:20,823 p=32202 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 23:03:20,857 p=32202 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 23:03:20,877 p=32202 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *****************************************************************************
2026-01-14 23:03:21,250 p=32202 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:03:21,265 p=32202 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 23:03:21,265 p=32202 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 23:03:21,269 p=32202 u=laxman n=ansible | TASK [Add Nexus registry to registries.yaml] ****************************************************************************
2026-01-14 23:03:21,699 p=32202 u=laxman n=ansible | fatal: [192.168.0.32]: FAILED! => {"changed": false, "msg": "Path /etc/rancher/k3s/registries.yaml does not exist !", "rc": 257}
2026-01-14 23:03:21,705 p=32202 u=laxman n=ansible | fatal: [192.168.0.31]: FAILED! => {"changed": false, "msg": "Path /etc/rancher/k3s/registries.yaml does not exist !", "rc": 257}
2026-01-14 23:03:21,733 p=32202 u=laxman n=ansible | fatal: [192.168.0.30]: FAILED! => {"changed": false, "msg": "Path /etc/rancher/k3s/registries.yaml does not exist !", "rc": 257}
2026-01-14 23:03:21,734 p=32202 u=laxman n=ansible | PLAY RECAP **************************************************************************************************************
2026-01-14 23:03:21,734 p=32202 u=laxman n=ansible | 192.168.0.30               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 23:03:21,734 p=32202 u=laxman n=ansible | 192.168.0.31               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 23:03:21,734 p=32202 u=laxman n=ansible | 192.168.0.32               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 23:03:21,734 p=32202 u=laxman n=ansible | 192.168.0.33               : ok=19   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-14 23:08:47,909 p=32885 u=laxman n=ansible | [WARNING]: While constructing a mapping from /home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/04-jenkins-nexus.yml,
line 445, column 3, found a duplicate dict key (hosts). Using last defined value only.

2026-01-14 23:08:47,909 p=32885 u=laxman n=ansible | [WARNING]: While constructing a mapping from /home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/04-jenkins-nexus.yml,
line 445, column 3, found a duplicate dict key (become). Using last defined value only.

2026-01-14 23:08:47,910 p=32885 u=laxman n=ansible | [WARNING]: While constructing a mapping from /home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/04-jenkins-nexus.yml,
line 445, column 3, found a duplicate dict key (gather_facts). Using last defined value only.

2026-01-14 23:08:47,910 p=32885 u=laxman n=ansible | [WARNING]: While constructing a mapping from /home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/04-jenkins-nexus.yml,
line 445, column 3, found a duplicate dict key (vars). Using last defined value only.

2026-01-14 23:08:47,910 p=32885 u=laxman n=ansible | [WARNING]: While constructing a mapping from /home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/04-jenkins-nexus.yml,
line 445, column 3, found a duplicate dict key (tasks). Using last defined value only.

2026-01-14 23:08:48,014 p=32885 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *************************************************************************************
2026-01-14 23:08:48,028 p=32885 u=laxman n=ansible | TASK [Gathering Facts] **************************************************************************************************
2026-01-14 23:08:49,868 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:08:49,878 p=32885 u=laxman n=ansible | TASK [Install Docker dependencies] **************************************************************************************
2026-01-14 23:08:52,875 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:08:52,879 p=32885 u=laxman n=ansible | TASK [Add Docker GPG key] ***********************************************************************************************
2026-01-14 23:08:53,628 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:08:53,632 p=32885 u=laxman n=ansible | TASK [Add Docker repository] ********************************************************************************************
2026-01-14 23:08:54,179 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:08:54,183 p=32885 u=laxman n=ansible | TASK [Install Docker Engine and CLI] ************************************************************************************
2026-01-14 23:08:55,268 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:08:55,272 p=32885 u=laxman n=ansible | TASK [Ensure Docker is running] *****************************************************************************************
2026-01-14 23:08:55,942 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:08:55,946 p=32885 u=laxman n=ansible | TASK [Add ansible user to docker group] *********************************************************************************
2026-01-14 23:08:56,439 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:08:56,442 p=32885 u=laxman n=ansible | TASK [Create Jenkins directory with correct owner] **********************************************************************
2026-01-14 23:08:56,854 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:08:56,859 p=32885 u=laxman n=ansible | TASK [Create Nexus directory with correct owner] ************************************************************************
2026-01-14 23:08:57,188 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:08:57,192 p=32885 u=laxman n=ansible | TASK [Create Jenkins .kube directory] ***********************************************************************************
2026-01-14 23:08:57,524 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:08:57,528 p=32885 u=laxman n=ansible | TASK [Create CI/CD Docker network] **************************************************************************************
2026-01-14 23:08:58,154 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:08:58,158 p=32885 u=laxman n=ansible | TASK [Read kubeconfig from K3s master] **********************************************************************************
2026-01-14 23:08:59,307 p=32885 u=laxman n=ansible | ok: [192.168.0.33 -> 192.168.0.30]
2026-01-14 23:08:59,316 p=32885 u=laxman n=ansible | TASK [Write kubeconfig to Jenkins host] *********************************************************************************
2026-01-14 23:09:00,030 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:09:00,036 p=32885 u=laxman n=ansible | TASK [Start Jenkins container] ******************************************************************************************
2026-01-14 23:09:00,892 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:09:00,896 p=32885 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *********************************************************************************
2026-01-14 23:09:01,307 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:09:01,312 p=32885 u=laxman n=ansible | TASK [Start Nexus container] ********************************************************************************************
2026-01-14 23:09:01,983 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:09:01,987 p=32885 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***********************************************************************************
2026-01-14 23:09:02,327 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:09:02,331 p=32885 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] **************************************************************
2026-01-14 23:09:03,042 p=32885 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-14 23:09:03,664 p=32885 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-14 23:09:04,288 p=32885 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-14 23:09:04,913 p=32885 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-14 23:09:04,918 p=32885 u=laxman n=ansible | TASK [Enable UFW safely] ************************************************************************************************
2026-01-14 23:09:06,803 p=32885 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:09:06,817 p=32885 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] ***************************************************************
2026-01-14 23:09:06,819 p=32885 u=laxman n=ansible | TASK [Gathering Facts] **************************************************************************************************
2026-01-14 23:09:08,001 p=32885 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:09:08,773 p=32885 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 23:09:08,792 p=32885 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 23:09:08,813 p=32885 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *****************************************************************************
2026-01-14 23:09:09,190 p=32885 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:09:09,197 p=32885 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 23:09:09,206 p=32885 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 23:09:09,210 p=32885 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ************************************************************************************
2026-01-14 23:09:10,016 p=32885 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 23:09:10,020 p=32885 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 23:09:10,047 p=32885 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 23:09:10,050 p=32885 u=laxman n=ansible | TASK [Add Nexus registry entry] *****************************************************************************************
2026-01-14 23:09:10,504 p=32885 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 23:09:10,508 p=32885 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 23:09:10,518 p=32885 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 23:09:10,523 p=32885 u=laxman n=ansible | TASK [Restart K3s to apply registry changes] ****************************************************************************
2026-01-14 23:09:11,170 p=32885 u=laxman n=ansible | fatal: [192.168.0.31]: FAILED! => {"changed": false, "msg": "Could not find the requested service k3s: host"}
2026-01-14 23:09:11,186 p=32885 u=laxman n=ansible | fatal: [192.168.0.32]: FAILED! => {"changed": false, "msg": "Could not find the requested service k3s: host"}
2026-01-14 23:09:14,617 p=32885 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 23:09:14,622 p=32885 u=laxman n=ansible | TASK [Add Nexus registry to registries.yaml] ****************************************************************************
2026-01-14 23:09:15,039 p=32885 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:09:15,044 p=32885 u=laxman n=ansible | TASK [Restart K3s to apply registry changes] ****************************************************************************
2026-01-14 23:09:19,117 p=32885 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 23:09:19,132 p=32885 u=laxman n=ansible | PLAY RECAP **************************************************************************************************************
2026-01-14 23:09:19,132 p=32885 u=laxman n=ansible | 192.168.0.30               : ok=7    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-14 23:09:19,132 p=32885 u=laxman n=ansible | 192.168.0.31               : ok=4    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 23:09:19,132 p=32885 u=laxman n=ansible | 192.168.0.32               : ok=4    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-14 23:09:19,132 p=32885 u=laxman n=ansible | 192.168.0.33               : ok=19   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-14 23:14:48,071 p=33613 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *************************************************************************************
2026-01-14 23:14:48,084 p=33613 u=laxman n=ansible | TASK [Gathering Facts] **************************************************************************************************
2026-01-14 23:14:49,994 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:14:50,002 p=33613 u=laxman n=ansible | TASK [Install Docker dependencies] **************************************************************************************
2026-01-14 23:14:53,054 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:14:53,061 p=33613 u=laxman n=ansible | TASK [Add Docker GPG key] ***********************************************************************************************
2026-01-14 23:14:53,798 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:14:53,804 p=33613 u=laxman n=ansible | TASK [Add Docker repository] ********************************************************************************************
2026-01-14 23:14:54,398 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:14:54,402 p=33613 u=laxman n=ansible | TASK [Install Docker Engine and CLI] ************************************************************************************
2026-01-14 23:14:55,492 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:14:55,496 p=33613 u=laxman n=ansible | TASK [Ensure Docker is running] *****************************************************************************************
2026-01-14 23:14:56,159 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:14:56,164 p=33613 u=laxman n=ansible | TASK [Add ansible user to docker group] *********************************************************************************
2026-01-14 23:14:56,638 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:14:56,643 p=33613 u=laxman n=ansible | TASK [Create Jenkins directory with correct owner] **********************************************************************
2026-01-14 23:14:57,050 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:14:57,053 p=33613 u=laxman n=ansible | TASK [Create Nexus directory with correct owner] ************************************************************************
2026-01-14 23:14:57,392 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:14:57,397 p=33613 u=laxman n=ansible | TASK [Create Jenkins .kube directory] ***********************************************************************************
2026-01-14 23:14:57,734 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:14:57,740 p=33613 u=laxman n=ansible | TASK [Create CI/CD Docker network] **************************************************************************************
2026-01-14 23:14:58,357 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:14:58,361 p=33613 u=laxman n=ansible | TASK [Read kubeconfig from K3s master] **********************************************************************************
2026-01-14 23:14:59,539 p=33613 u=laxman n=ansible | ok: [192.168.0.33 -> 192.168.0.30]
2026-01-14 23:14:59,547 p=33613 u=laxman n=ansible | TASK [Write kubeconfig to Jenkins host] *********************************************************************************
2026-01-14 23:15:00,268 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:15:00,273 p=33613 u=laxman n=ansible | TASK [Start Jenkins container] ******************************************************************************************
2026-01-14 23:15:01,119 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:15:01,123 p=33613 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *********************************************************************************
2026-01-14 23:15:01,529 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:15:01,533 p=33613 u=laxman n=ansible | TASK [Start Nexus container] ********************************************************************************************
2026-01-14 23:15:02,224 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:15:02,228 p=33613 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***********************************************************************************
2026-01-14 23:15:02,580 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:15:02,585 p=33613 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] **************************************************************
2026-01-14 23:15:03,321 p=33613 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-14 23:15:03,955 p=33613 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-14 23:15:04,601 p=33613 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-14 23:15:05,239 p=33613 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-14 23:15:05,245 p=33613 u=laxman n=ansible | TASK [Enable UFW safely] ************************************************************************************************
2026-01-14 23:15:07,074 p=33613 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:15:07,091 p=33613 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] ***************************************************************
2026-01-14 23:15:07,093 p=33613 u=laxman n=ansible | TASK [Gathering Facts] **************************************************************************************************
2026-01-14 23:15:08,234 p=33613 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:15:09,077 p=33613 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 23:15:09,078 p=33613 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 23:15:09,098 p=33613 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *****************************************************************************
2026-01-14 23:15:09,504 p=33613 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:15:09,509 p=33613 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 23:15:09,509 p=33613 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 23:15:09,513 p=33613 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ************************************************************************************
2026-01-14 23:15:10,397 p=33613 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 23:15:10,398 p=33613 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 23:15:10,452 p=33613 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 23:15:10,456 p=33613 u=laxman n=ansible | TASK [Add Nexus registry entry] *****************************************************************************************
2026-01-14 23:15:10,903 p=33613 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 23:15:10,930 p=33613 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 23:15:10,946 p=33613 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 23:15:10,951 p=33613 u=laxman n=ansible | TASK [Restart K3s service on master] ************************************************************************************
2026-01-14 23:15:10,979 p=33613 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-14 23:15:10,984 p=33613 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-14 23:15:14,901 p=33613 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 23:15:14,906 p=33613 u=laxman n=ansible | TASK [Restart K3s agent service on workers] *****************************************************************************
2026-01-14 23:15:14,928 p=33613 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-14 23:15:18,953 p=33613 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-14 23:15:23,149 p=33613 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-14 23:15:23,203 p=33613 u=laxman n=ansible | PLAY RECAP **************************************************************************************************************
2026-01-14 23:15:23,203 p=33613 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-14 23:15:23,203 p=33613 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-14 23:15:23,203 p=33613 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-14 23:15:23,203 p=33613 u=laxman n=ansible | 192.168.0.33               : ok=19   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-14 23:22:13,128 p=34626 u=laxman n=ansible | PLAY [Validate basic host reachability and user environment] ****************************************************
2026-01-14 23:22:13,142 p=34626 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-14 23:22:15,549 p=34626 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 23:22:15,559 p=34626 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 23:22:15,661 p=34626 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:22:15,726 p=34626 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:22:15,752 p=34626 u=laxman n=ansible | TASK [Verify Ansible can ping the host] *************************************************************************
2026-01-14 23:22:16,234 p=34626 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 23:22:16,236 p=34626 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:22:16,241 p=34626 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 23:22:16,269 p=34626 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:22:16,272 p=34626 u=laxman n=ansible | TASK [Check ansible user home exists] ***************************************************************************
2026-01-14 23:22:16,798 p=34626 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-14 23:22:16,818 p=34626 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-14 23:22:16,834 p=34626 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-14 23:22:16,839 p=34626 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:22:16,848 p=34626 u=laxman n=ansible | TASK [Fail if ansible user home is missing] *********************************************************************
2026-01-14 23:22:16,897 p=34626 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-14 23:22:16,921 p=34626 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-14 23:22:16,935 p=34626 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-14 23:22:16,943 p=34626 u=laxman n=ansible | skipping: [192.168.0.33]
2026-01-14 23:22:17,013 p=34626 u=laxman n=ansible | [WARNING]: Could not match supplied host pattern, ignoring: cicd

2026-01-14 23:22:17,013 p=34626 u=laxman n=ansible | PLAY [Validate CI/CD host (Docker, Jenkins, Nexus)] *************************************************************
2026-01-14 23:22:17,013 p=34626 u=laxman n=ansible | skipping: no hosts matched
2026-01-14 23:22:17,014 p=34626 u=laxman n=ansible | PLAY [Validate Kubernetes master] *******************************************************************************
2026-01-14 23:22:17,019 p=34626 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-14 23:22:18,045 p=34626 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:22:18,054 p=34626 u=laxman n=ansible | TASK [Ensure K3s server config exists] **************************************************************************
2026-01-14 23:22:18,388 p=34626 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:22:18,392 p=34626 u=laxman n=ansible | TASK [Fail if K3s config missing] *******************************************************************************
2026-01-14 23:22:18,402 p=34626 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-14 23:22:18,407 p=34626 u=laxman n=ansible | TASK [Check K3s API port open] **********************************************************************************
2026-01-14 23:22:18,790 p=34626 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:22:18,799 p=34626 u=laxman n=ansible | TASK [Display K3s nodes] ****************************************************************************************
2026-01-14 23:22:19,318 p=34626 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:22:19,325 p=34626 u=laxman n=ansible | TASK [ansible.builtin.debug] ************************************************************************************
2026-01-14 23:22:19,339 p=34626 u=laxman n=ansible | ok: [192.168.0.30] => {
    "msg": "K3s cluster nodes:\nNAME           STATUS   ROLES                  AGE    VERSION        INTERNAL-IP    EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION     CONTAINER-RUNTIME\n192.168.0.32   Ready    worker                 72m    v1.28.3+k3s1   192.168.0.32   <none>        Ubuntu 24.04.3 LTS   6.8.0-90-generic   containerd://1.7.7-k3s1\n192.168.0.31   Ready    worker                 72m    v1.28.3+k3s1   192.168.0.31   <none>        Ubuntu 24.04.3 LTS   6.8.0-90-generic   containerd://1.7.7-k3s1\n192.168.0.30   Ready    control-plane,master   111m   v1.28.3+k3s1   192.168.0.30   <none>        Ubuntu 24.04.3 LTS   6.8.0-90-generic   containerd://1.7.7-k3s1"
}
2026-01-14 23:22:19,358 p=34626 u=laxman n=ansible | PLAY [Validate registry access from Kubernetes] *****************************************************************
2026-01-14 23:22:19,363 p=34626 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-14 23:22:20,372 p=34626 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-14 23:22:20,383 p=34626 u=laxman n=ansible | TASK [Create test namespace for registry validation] ************************************************************
2026-01-14 23:22:20,846 p=34626 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 23:22:20,850 p=34626 u=laxman n=ansible | TASK [Launch a test pod that pulls from registry] ***************************************************************
2026-01-14 23:22:21,318 p=34626 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-14 23:22:21,322 p=34626 u=laxman n=ansible | TASK [Wait for test pod to be ready] ****************************************************************************
2026-01-14 23:23:21,768 p=34626 u=laxman n=ansible | fatal: [192.168.0.30]: FAILED! => {"changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "pod/registry-validate-pod", "-n", "registry-test", "--kubeconfig=/etc/rancher/k3s/k3s.yaml", "--timeout=60s"], "delta": "0:01:00.107441", "end": "2026-01-14 23:23:21.748084", "failed_when_result": true, "msg": "non-zero return code", "rc": 1, "start": "2026-01-14 23:22:21.640643", "stderr": "error: timed out waiting for the condition on pods/registry-validate-pod", "stderr_lines": ["error: timed out waiting for the condition on pods/registry-validate-pod"], "stdout": "", "stdout_lines": []}
2026-01-14 23:23:21,768 p=34626 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-14 23:23:21,769 p=34626 u=laxman n=ansible | 192.168.0.30               : ok=11   changed=2    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2026-01-14 23:23:21,769 p=34626 u=laxman n=ansible | 192.168.0.31               : ok=3    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-14 23:23:21,769 p=34626 u=laxman n=ansible | 192.168.0.32               : ok=3    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-14 23:23:21,769 p=34626 u=laxman n=ansible | 192.168.0.33               : ok=3    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 00:22:27,302 p=37399 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 00:22:27,318 p=37399 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:22:29,701 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:29,729 p=37399 u=laxman n=ansible | TASK [Install Docker dependencies] ******************************************************************************
2026-01-15 00:22:38,151 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:38,165 p=37399 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 00:22:39,157 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:39,168 p=37399 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 00:22:39,866 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:39,878 p=37399 u=laxman n=ansible | TASK [Install Docker Engine and CLI] ****************************************************************************
2026-01-15 00:22:41,100 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:41,114 p=37399 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 00:22:41,973 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:41,984 p=37399 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 00:22:42,668 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:42,680 p=37399 u=laxman n=ansible | TASK [Create Jenkins directory with correct owner] **************************************************************
2026-01-15 00:22:43,189 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:43,206 p=37399 u=laxman n=ansible | TASK [Create Nexus directory with correct owner] ****************************************************************
2026-01-15 00:22:43,692 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:43,703 p=37399 u=laxman n=ansible | TASK [Create Jenkins .kube directory] ***************************************************************************
2026-01-15 00:22:44,071 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:44,078 p=37399 u=laxman n=ansible | TASK [Create CI/CD Docker network] ******************************************************************************
2026-01-15 00:22:44,928 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:44,944 p=37399 u=laxman n=ansible | TASK [Read kubeconfig from K3s master] **************************************************************************
2026-01-15 00:22:46,292 p=37399 u=laxman n=ansible | ok: [192.168.0.33 -> 192.168.0.30]
2026-01-15 00:22:46,312 p=37399 u=laxman n=ansible | TASK [Write kubeconfig to Jenkins host] *************************************************************************
2026-01-15 00:22:47,244 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:47,252 p=37399 u=laxman n=ansible | TASK [Create Jenkins casc_configs directory] ********************************************************************
2026-01-15 00:22:47,634 p=37399 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:22:47,642 p=37399 u=laxman n=ansible | TASK [Copy Jenkins JCasC file into Jenkins home] ****************************************************************
2026-01-15 00:22:48,480 p=37399 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:22:48,492 p=37399 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 00:22:50,061 p=37399 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:22:50,070 p=37399 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *************************************************************************
2026-01-15 00:22:50,682 p=37399 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:22:50,697 p=37399 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 00:22:51,414 p=37399 u=laxman n=ansible | fatal: [192.168.0.33]: FAILED! => {"changed": false, "msg": "value of state must be one of: absent, present, started, stopped, got: restarted"}
2026-01-15 00:22:51,416 p=37399 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 00:22:51,417 p=37399 u=laxman n=ansible | 192.168.0.33               : ok=17   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-15 00:23:51,619 p=37906 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 00:23:51,633 p=37906 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:23:53,947 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:23:53,971 p=37906 u=laxman n=ansible | TASK [Install Docker dependencies] ******************************************************************************
2026-01-15 00:23:56,806 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:23:56,821 p=37906 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 00:23:57,723 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:23:57,740 p=37906 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 00:23:58,432 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:23:58,446 p=37906 u=laxman n=ansible | TASK [Install Docker Engine and CLI] ****************************************************************************
2026-01-15 00:23:59,678 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:23:59,690 p=37906 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 00:24:00,605 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:00,617 p=37906 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 00:24:01,315 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:01,332 p=37906 u=laxman n=ansible | TASK [Create Jenkins directory with correct owner] **************************************************************
2026-01-15 00:24:01,924 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:01,934 p=37906 u=laxman n=ansible | TASK [Create Nexus directory with correct owner] ****************************************************************
2026-01-15 00:24:02,340 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:02,353 p=37906 u=laxman n=ansible | TASK [Create Jenkins .kube directory] ***************************************************************************
2026-01-15 00:24:02,852 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:02,865 p=37906 u=laxman n=ansible | TASK [Create CI/CD Docker network] ******************************************************************************
2026-01-15 00:24:03,671 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:03,689 p=37906 u=laxman n=ansible | TASK [Read kubeconfig from K3s master] **************************************************************************
2026-01-15 00:24:05,027 p=37906 u=laxman n=ansible | ok: [192.168.0.33 -> 192.168.0.30]
2026-01-15 00:24:05,048 p=37906 u=laxman n=ansible | TASK [Write kubeconfig to Jenkins host] *************************************************************************
2026-01-15 00:24:06,018 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:06,034 p=37906 u=laxman n=ansible | TASK [Create Jenkins casc_configs directory] ********************************************************************
2026-01-15 00:24:06,436 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:06,447 p=37906 u=laxman n=ansible | TASK [Copy Jenkins JCasC file into Jenkins home] ****************************************************************
2026-01-15 00:24:07,254 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:07,264 p=37906 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 00:24:08,286 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:08,296 p=37906 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *************************************************************************
2026-01-15 00:24:08,807 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:08,821 p=37906 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 00:24:09,617 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:09,627 p=37906 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***************************************************************************
2026-01-15 00:24:10,053 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:10,062 p=37906 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] ******************************************************
2026-01-15 00:24:10,961 p=37906 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 00:24:11,660 p=37906 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 00:24:12,355 p=37906 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 00:24:13,067 p=37906 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 00:24:13,080 p=37906 u=laxman n=ansible | TASK [Enable UFW safely] ****************************************************************************************
2026-01-15 00:24:15,050 p=37906 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:24:15,089 p=37906 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] *******************************************************
2026-01-15 00:24:15,093 p=37906 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:24:16,323 p=37906 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 00:24:17,312 p=37906 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 00:24:17,314 p=37906 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 00:24:17,355 p=37906 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *********************************************************************
2026-01-15 00:24:17,819 p=37906 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 00:24:17,820 p=37906 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 00:24:17,860 p=37906 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 00:24:17,873 p=37906 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ****************************************************************************
2026-01-15 00:24:18,937 p=37906 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:24:18,939 p=37906 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 00:24:18,939 p=37906 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 00:24:18,952 p=37906 u=laxman n=ansible | TASK [Add Nexus registry entry] *********************************************************************************
2026-01-15 00:24:19,641 p=37906 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 00:24:19,642 p=37906 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:24:19,642 p=37906 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 00:24:19,653 p=37906 u=laxman n=ansible | TASK [Restart K3s service on master] ****************************************************************************
2026-01-15 00:24:19,714 p=37906 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 00:24:19,729 p=37906 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 00:24:23,709 p=37906 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:24:23,722 p=37906 u=laxman n=ansible | TASK [Restart K3s agent service on workers] *********************************************************************
2026-01-15 00:24:23,764 p=37906 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 00:24:28,569 p=37906 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 00:24:28,591 p=37906 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 00:24:28,699 p=37906 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 00:24:28,699 p=37906 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 00:24:28,699 p=37906 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 00:24:28,699 p=37906 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 00:24:28,700 p=37906 u=laxman n=ansible | 192.168.0.33               : ok=21   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 00:33:18,522 p=38933 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 00:33:18,538 p=38933 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:33:20,768 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:20,784 p=38933 u=laxman n=ansible | TASK [Install Docker dependencies] ******************************************************************************
2026-01-15 00:33:23,610 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:23,616 p=38933 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 00:33:24,431 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:24,449 p=38933 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 00:33:25,097 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:25,112 p=38933 u=laxman n=ansible | TASK [Install Docker Engine and CLI] ****************************************************************************
2026-01-15 00:33:26,279 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:26,292 p=38933 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 00:33:27,143 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:27,153 p=38933 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 00:33:27,800 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:27,814 p=38933 u=laxman n=ansible | TASK [Create Jenkins directory with correct owner] **************************************************************
2026-01-15 00:33:28,521 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:28,536 p=38933 u=laxman n=ansible | TASK [Create Nexus directory with correct owner] ****************************************************************
2026-01-15 00:33:28,980 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:28,988 p=38933 u=laxman n=ansible | TASK [Create Jenkins .kube directory] ***************************************************************************
2026-01-15 00:33:29,445 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:29,457 p=38933 u=laxman n=ansible | TASK [Create CI/CD Docker network] ******************************************************************************
2026-01-15 00:33:30,267 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:30,277 p=38933 u=laxman n=ansible | TASK [Read kubeconfig from K3s master] **************************************************************************
2026-01-15 00:33:31,797 p=38933 u=laxman n=ansible | ok: [192.168.0.33 -> 192.168.0.30]
2026-01-15 00:33:31,817 p=38933 u=laxman n=ansible | TASK [Write kubeconfig to Jenkins host] *************************************************************************
2026-01-15 00:33:32,709 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:32,724 p=38933 u=laxman n=ansible | TASK [Create Jenkins casc_configs directory] ********************************************************************
2026-01-15 00:33:33,108 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:33,113 p=38933 u=laxman n=ansible | TASK [Copy Jenkins JCasC file into Jenkins home] ****************************************************************
2026-01-15 00:33:33,845 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:33,854 p=38933 u=laxman n=ansible | TASK [Show casc config on host] *********************************************************************************
2026-01-15 00:33:34,351 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:34,361 p=38933 u=laxman n=ansible | TASK [debug] ****************************************************************************************************
2026-01-15 00:33:34,388 p=38933 u=laxman n=ansible | ok: [192.168.0.33] => {
    "msg": "-rw-r--r-- 1 ubuntu ubuntu 373 Jan 15 00:22 /opt/jenkins/casc_configs/jenkins.yaml"
}
2026-01-15 00:33:34,397 p=38933 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 00:33:35,965 p=38933 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:33:35,977 p=38933 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *************************************************************************
2026-01-15 00:33:36,635 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:36,649 p=38933 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 00:33:37,578 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:37,585 p=38933 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***************************************************************************
2026-01-15 00:33:38,081 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:38,092 p=38933 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] ******************************************************
2026-01-15 00:33:39,101 p=38933 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 00:33:39,904 p=38933 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 00:33:40,825 p=38933 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 00:33:41,630 p=38933 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 00:33:41,644 p=38933 u=laxman n=ansible | TASK [Enable UFW safely] ****************************************************************************************
2026-01-15 00:33:43,677 p=38933 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:33:43,723 p=38933 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] *******************************************************
2026-01-15 00:33:43,726 p=38933 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:33:44,949 p=38933 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 00:33:45,965 p=38933 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 00:33:45,967 p=38933 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 00:33:46,003 p=38933 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *********************************************************************
2026-01-15 00:33:46,434 p=38933 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 00:33:46,434 p=38933 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 00:33:46,449 p=38933 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 00:33:46,457 p=38933 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ****************************************************************************
2026-01-15 00:33:47,572 p=38933 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 00:33:47,573 p=38933 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:33:47,573 p=38933 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 00:33:47,585 p=38933 u=laxman n=ansible | TASK [Add Nexus registry entry] *********************************************************************************
2026-01-15 00:33:48,135 p=38933 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 00:33:48,139 p=38933 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:33:48,139 p=38933 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 00:33:48,152 p=38933 u=laxman n=ansible | TASK [Restart K3s service on master] ****************************************************************************
2026-01-15 00:33:48,190 p=38933 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 00:33:48,200 p=38933 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 00:33:52,188 p=38933 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:33:52,200 p=38933 u=laxman n=ansible | TASK [Restart K3s agent service on workers] *********************************************************************
2026-01-15 00:33:52,242 p=38933 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 00:34:00,800 p=38933 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 00:34:00,960 p=38933 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 00:34:01,042 p=38933 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 00:34:01,043 p=38933 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 00:34:01,043 p=38933 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 00:34:01,043 p=38933 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 00:34:01,043 p=38933 u=laxman n=ansible | 192.168.0.33               : ok=23   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 00:40:23,099 p=39856 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 00:40:23,115 p=39856 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:40:25,355 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:25,377 p=39856 u=laxman n=ansible | TASK [Install Docker dependencies] ******************************************************************************
2026-01-15 00:40:28,004 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:28,013 p=39856 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 00:40:28,884 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:28,895 p=39856 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 00:40:29,640 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:29,652 p=39856 u=laxman n=ansible | TASK [Install Docker Engine and CLI] ****************************************************************************
2026-01-15 00:40:30,931 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:30,948 p=39856 u=laxman n=ansible | TASK [Ensure Docker service is running] *************************************************************************
2026-01-15 00:40:31,859 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:31,869 p=39856 u=laxman n=ansible | TASK [Add ansible user to Docker group] *************************************************************************
2026-01-15 00:40:32,570 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:32,583 p=39856 u=laxman n=ansible | TASK [Create Jenkins home with correct UID] *********************************************************************
2026-01-15 00:40:33,095 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:33,103 p=39856 u=laxman n=ansible | TASK [Create Jenkins plugin and config dirs] ********************************************************************
2026-01-15 00:40:33,502 p=39856 u=laxman n=ansible | ok: [192.168.0.33] => (item=plugins)
2026-01-15 00:40:33,903 p=39856 u=laxman n=ansible | ok: [192.168.0.33] => (item=casc_configs)
2026-01-15 00:40:33,916 p=39856 u=laxman n=ansible | TASK [Create Nexus data directory] ******************************************************************************
2026-01-15 00:40:34,308 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:34,316 p=39856 u=laxman n=ansible | TASK [Copy Jenkins JCasC config] ********************************************************************************
2026-01-15 00:40:35,091 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:35,099 p=39856 u=laxman n=ansible | TASK [Download Jenkins Configuration as Code plugin] ************************************************************
2026-01-15 00:40:38,446 p=39856 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:40:38,457 p=39856 u=laxman n=ansible | TASK [Remove existing Jenkins container] ************************************************************************
2026-01-15 00:40:39,632 p=39856 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:40:39,644 p=39856 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 00:40:40,682 p=39856 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:40:40,690 p=39856 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *************************************************************************
2026-01-15 00:40:42,408 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:42,423 p=39856 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 00:40:43,341 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:43,354 p=39856 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***************************************************************************
2026-01-15 00:40:43,830 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:43,835 p=39856 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] ******************************************************
2026-01-15 00:40:44,867 p=39856 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 00:40:45,682 p=39856 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 00:40:46,486 p=39856 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 00:40:47,209 p=39856 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 00:40:47,219 p=39856 u=laxman n=ansible | TASK [Enable UFW safely] ****************************************************************************************
2026-01-15 00:40:49,255 p=39856 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:40:49,288 p=39856 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] *******************************************************
2026-01-15 00:40:49,304 p=39856 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:40:51,746 p=39856 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 00:40:51,748 p=39856 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 00:40:51,842 p=39856 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 00:40:51,875 p=39856 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *********************************************************************
2026-01-15 00:40:52,337 p=39856 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 00:40:52,338 p=39856 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 00:40:52,340 p=39856 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 00:40:52,351 p=39856 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ****************************************************************************
2026-01-15 00:40:53,465 p=39856 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 00:40:53,466 p=39856 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:40:53,467 p=39856 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 00:40:53,477 p=39856 u=laxman n=ansible | TASK [Add Nexus registry entry] *********************************************************************************
2026-01-15 00:40:54,007 p=39856 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 00:40:54,012 p=39856 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 00:40:54,014 p=39856 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:40:54,024 p=39856 u=laxman n=ansible | TASK [Restart K3s service on master] ****************************************************************************
2026-01-15 00:40:54,065 p=39856 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 00:40:54,071 p=39856 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 00:40:58,009 p=39856 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:40:58,020 p=39856 u=laxman n=ansible | TASK [Restart K3s agent service on workers] *********************************************************************
2026-01-15 00:40:58,054 p=39856 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 00:41:06,672 p=39856 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 00:41:06,746 p=39856 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 00:41:06,846 p=39856 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 00:41:06,846 p=39856 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 00:41:06,846 p=39856 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 00:41:06,847 p=39856 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 00:41:06,847 p=39856 u=laxman n=ansible | 192.168.0.33               : ok=19   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 00:50:10,497 p=40875 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 00:50:10,514 p=40875 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:50:12,816 p=40875 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:50:12,837 p=40875 u=laxman n=ansible | TASK [Install Docker dependencies] ******************************************************************************
2026-01-15 00:50:15,756 p=40875 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:50:15,769 p=40875 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 00:50:16,676 p=40875 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:50:16,689 p=40875 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 00:50:17,382 p=40875 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:50:17,389 p=40875 u=laxman n=ansible | TASK [Install Docker Engine and CLI] ****************************************************************************
2026-01-15 00:50:18,625 p=40875 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:50:18,636 p=40875 u=laxman n=ansible | TASK [Ensure Docker service is running] *************************************************************************
2026-01-15 00:50:19,541 p=40875 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:50:19,548 p=40875 u=laxman n=ansible | TASK [Add ansible user to Docker group] *************************************************************************
2026-01-15 00:50:20,157 p=40875 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:50:20,166 p=40875 u=laxman n=ansible | TASK [Create Jenkins home with correct UID] *********************************************************************
2026-01-15 00:50:20,685 p=40875 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:50:20,692 p=40875 u=laxman n=ansible | TASK [Create Jenkins plugin and config dirs] ********************************************************************
2026-01-15 00:50:21,094 p=40875 u=laxman n=ansible | ok: [192.168.0.33] => (item=plugins)
2026-01-15 00:50:21,492 p=40875 u=laxman n=ansible | ok: [192.168.0.33] => (item=casc_configs)
2026-01-15 00:50:21,503 p=40875 u=laxman n=ansible | TASK [Create Nexus data directory] ******************************************************************************
2026-01-15 00:50:21,963 p=40875 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:50:21,979 p=40875 u=laxman n=ansible | TASK [Copy Jenkins JCasC config] ********************************************************************************
2026-01-15 00:50:22,926 p=40875 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:50:22,936 p=40875 u=laxman n=ansible | TASK [Remove old Jenkins container] *****************************************************************************
2026-01-15 00:50:24,258 p=40875 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:50:24,273 p=40875 u=laxman n=ansible | TASK [Install required Jenkins plugins (with dependencies)] *****************************************************
2026-01-15 00:50:24,888 p=40875 u=laxman n=ansible | fatal: [192.168.0.33]: FAILED! => {"changed": false, "msg": "Unsupported parameters for (docker_container) module: remove. Supported parameters include: api_version, auto_remove, blkio_weight, ca_path, cap_drop, capabilities, cgroup_parent, cgroupns_mode, cleanup, client_cert, client_key, command, command_handling, comparisons, container_default_behavior, cpu_period, cpu_quota, cpu_shares, cpus, cpuset_cpus, cpuset_mems, debug, default_host_ip, detach, device_read_bps, device_read_iops, device_requests, device_write_bps, device_write_iops, devices, dns_opts, dns_search_domains, dns_servers, docker_host, domainname, entrypoint, env, env_file, etc_hosts, exposed_ports, force_kill, groups, healthcheck, hostname, ignore_image, image, image_comparison, image_label_mismatch, image_name_mismatch, init, interactive, ipc_mode, keep_volumes, kernel_memory, kill_signal, labels, links, log_driver, log_options, mac_address, memory, memory_reservation, memory_swap, memory_swappiness, mounts, name, network_mode, networks, networks_cli_compatible, oom_killer, oom_score_adj, output_logs, paused, pid_mode, pids_limit, platform, privileged, publish_all_ports, published_ports, pull, purge_networks, read_only, recreate, removal_wait_timeout, restart, restart_policy, restart_retries, runtime, security_opts, shm_size, ssl_version, state, stop_signal, stop_timeout, storage_opts, sysctls, timeout, tls, tls_hostname, tmpfs, tty, ulimits, use_ssh_client, user, userns_mode, uts, validate_certs, volume_driver, volumes, volumes_from, working_dir (ca_cert, cacert_path, cert_path, docker_api_version, docker_url, expose, exposed, forcekill, key_path, log_opt, ports, tls_ca_cert, tls_client_cert, tls_client_key, tls_verify)."}
2026-01-15 00:50:24,890 p=40875 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 00:50:24,890 p=40875 u=laxman n=ansible | 192.168.0.33               : ok=12   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-15 00:53:50,414 p=41311 u=laxman n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  but found another document

The error appears to be in '/home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/04-jenkins-nexus.yml': line 260, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


---
^ here

2026-01-15 00:54:15,922 p=41453 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 00:54:15,936 p=41453 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:54:18,264 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:18,278 p=41453 u=laxman n=ansible | TASK [Install Docker dependencies] ******************************************************************************
2026-01-15 00:54:21,162 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:21,171 p=41453 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 00:54:21,996 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:22,005 p=41453 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 00:54:22,645 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:22,656 p=41453 u=laxman n=ansible | TASK [Install Docker Engine] ************************************************************************************
2026-01-15 00:54:23,877 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:23,890 p=41453 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 00:54:24,696 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:24,708 p=41453 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 00:54:25,309 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:25,322 p=41453 u=laxman n=ansible | TASK [Create Jenkins home] **************************************************************************************
2026-01-15 00:54:25,929 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:25,944 p=41453 u=laxman n=ansible | TASK [Create casc_configs directory for Jenkins config] *********************************************************
2026-01-15 00:54:26,430 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:26,437 p=41453 u=laxman n=ansible | TASK [Create plugins directory for Jenkins] *********************************************************************
2026-01-15 00:54:26,819 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:26,829 p=41453 u=laxman n=ansible | TASK [Copy Jenkins JCasC config] ********************************************************************************
2026-01-15 00:54:27,654 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:27,660 p=41453 u=laxman n=ansible | TASK [Remove old Jenkins container if exists] *******************************************************************
2026-01-15 00:54:28,495 p=41453 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:54:28,506 p=41453 u=laxman n=ansible | TASK [Install Jenkins plugins via jenkins-plugin-cli] ***********************************************************
2026-01-15 00:54:29,109 p=41453 u=laxman n=ansible | fatal: [192.168.0.33]: FAILED! => {"changed": false, "msg": "Unsupported parameters for (docker_container) module: remove. Supported parameters include: api_version, auto_remove, blkio_weight, ca_path, cap_drop, capabilities, cgroup_parent, cgroupns_mode, cleanup, client_cert, client_key, command, command_handling, comparisons, container_default_behavior, cpu_period, cpu_quota, cpu_shares, cpus, cpuset_cpus, cpuset_mems, debug, default_host_ip, detach, device_read_bps, device_read_iops, device_requests, device_write_bps, device_write_iops, devices, dns_opts, dns_search_domains, dns_servers, docker_host, domainname, entrypoint, env, env_file, etc_hosts, exposed_ports, force_kill, groups, healthcheck, hostname, ignore_image, image, image_comparison, image_label_mismatch, image_name_mismatch, init, interactive, ipc_mode, keep_volumes, kernel_memory, kill_signal, labels, links, log_driver, log_options, mac_address, memory, memory_reservation, memory_swap, memory_swappiness, mounts, name, network_mode, networks, networks_cli_compatible, oom_killer, oom_score_adj, output_logs, paused, pid_mode, pids_limit, platform, privileged, publish_all_ports, published_ports, pull, purge_networks, read_only, recreate, removal_wait_timeout, restart, restart_policy, restart_retries, runtime, security_opts, shm_size, ssl_version, state, stop_signal, stop_timeout, storage_opts, sysctls, timeout, tls, tls_hostname, tmpfs, tty, ulimits, use_ssh_client, user, userns_mode, uts, validate_certs, volume_driver, volumes, volumes_from, working_dir (ca_cert, cacert_path, cert_path, docker_api_version, docker_url, expose, exposed, forcekill, key_path, log_opt, ports, tls_ca_cert, tls_client_cert, tls_client_key, tls_verify)."}
2026-01-15 00:54:29,110 p=41453 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 00:54:29,111 p=41453 u=laxman n=ansible | 192.168.0.33               : ok=12   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-15 00:57:00,594 p=41868 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 00:57:00,615 p=41868 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:57:02,891 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:02,906 p=41868 u=laxman n=ansible | TASK [Install Docker dependencies] ******************************************************************************
2026-01-15 00:57:05,786 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:05,797 p=41868 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 00:57:06,697 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:06,712 p=41868 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 00:57:07,410 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:07,416 p=41868 u=laxman n=ansible | TASK [Install Docker Engine] ************************************************************************************
2026-01-15 00:57:08,643 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:08,656 p=41868 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 00:57:09,468 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:09,473 p=41868 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 00:57:10,344 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:10,356 p=41868 u=laxman n=ansible | TASK [Create Jenkins home] **************************************************************************************
2026-01-15 00:57:11,099 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:11,113 p=41868 u=laxman n=ansible | TASK [Create casc_configs directory for Jenkins config] *********************************************************
2026-01-15 00:57:11,507 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:11,517 p=41868 u=laxman n=ansible | TASK [Create plugins directory for Jenkins] *********************************************************************
2026-01-15 00:57:11,962 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:11,979 p=41868 u=laxman n=ansible | TASK [Copy Jenkins JCasC config] ********************************************************************************
2026-01-15 00:57:12,837 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:12,848 p=41868 u=laxman n=ansible | TASK [Remove old Jenkins container if exists] *******************************************************************
2026-01-15 00:57:13,758 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:13,769 p=41868 u=laxman n=ansible | TASK [Install Jenkins plugins via jenkins-plugin-cli (temporary container)] *************************************
2026-01-15 00:57:31,683 p=41868 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:57:31,699 p=41868 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 00:57:32,726 p=41868 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:57:32,742 p=41868 u=laxman n=ansible | TASK [Wait for Jenkins to become available] *********************************************************************
2026-01-15 00:57:34,292 p=41868 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:57:34,303 p=41868 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 00:57:34,335 p=41868 u=laxman n=ansible | fatal: [192.168.0.33]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'nexus_image' is undefined. 'nexus_image' is undefined\n\nThe error appears to be in '/home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/04-jenkins-nexus.yml': line 416, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n    - name: Start Nexus container\n      ^ here\n"}
2026-01-15 00:57:34,337 p=41868 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 00:57:34,338 p=41868 u=laxman n=ansible | 192.168.0.33               : ok=15   changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-15 00:59:15,480 p=42281 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 00:59:15,495 p=42281 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:59:17,721 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:17,747 p=42281 u=laxman n=ansible | TASK [Install Docker dependencies] ******************************************************************************
2026-01-15 00:59:20,903 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:20,909 p=42281 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 00:59:21,764 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:21,776 p=42281 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 00:59:22,483 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:22,497 p=42281 u=laxman n=ansible | TASK [Install Docker Engine] ************************************************************************************
2026-01-15 00:59:23,712 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:23,731 p=42281 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 00:59:24,537 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:24,551 p=42281 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 00:59:25,248 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:25,265 p=42281 u=laxman n=ansible | TASK [Create Jenkins home] **************************************************************************************
2026-01-15 00:59:25,762 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:25,774 p=42281 u=laxman n=ansible | TASK [Create casc_configs directory for Jenkins config] *********************************************************
2026-01-15 00:59:26,271 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:26,283 p=42281 u=laxman n=ansible | TASK [Create plugins directory for Jenkins] *********************************************************************
2026-01-15 00:59:26,782 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:26,802 p=42281 u=laxman n=ansible | TASK [Copy Jenkins JCasC config] ********************************************************************************
2026-01-15 00:59:27,806 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:27,819 p=42281 u=laxman n=ansible | TASK [Remove old Jenkins container if exists] *******************************************************************
2026-01-15 00:59:28,938 p=42281 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:59:28,951 p=42281 u=laxman n=ansible | TASK [Install Jenkins plugins via jenkins-plugin-cli (temporary container)] *************************************
2026-01-15 00:59:38,778 p=42281 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:59:38,795 p=42281 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 00:59:39,798 p=42281 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 00:59:39,811 p=42281 u=laxman n=ansible | TASK [Wait for Jenkins to become available] *********************************************************************
2026-01-15 00:59:41,432 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:41,448 p=42281 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 00:59:42,335 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:42,359 p=42281 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***************************************************************************
2026-01-15 00:59:42,858 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:42,864 p=42281 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] ******************************************************
2026-01-15 00:59:43,881 p=42281 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 00:59:44,706 p=42281 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 00:59:45,627 p=42281 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 00:59:46,324 p=42281 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 00:59:46,340 p=42281 u=laxman n=ansible | TASK [Enable UFW safely] ****************************************************************************************
2026-01-15 00:59:48,383 p=42281 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 00:59:48,419 p=42281 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] *******************************************************
2026-01-15 00:59:48,427 p=42281 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 00:59:50,687 p=42281 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 00:59:50,734 p=42281 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 00:59:50,735 p=42281 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 00:59:50,766 p=42281 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *********************************************************************
2026-01-15 00:59:51,256 p=42281 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 00:59:51,257 p=42281 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 00:59:51,275 p=42281 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 00:59:51,281 p=42281 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ****************************************************************************
2026-01-15 00:59:52,237 p=42281 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:59:52,244 p=42281 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 00:59:52,244 p=42281 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 00:59:52,254 p=42281 u=laxman n=ansible | TASK [Add Nexus registry entry] *********************************************************************************
2026-01-15 00:59:52,781 p=42281 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:59:52,791 p=42281 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 00:59:52,791 p=42281 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 00:59:52,798 p=42281 u=laxman n=ansible | TASK [Restart K3s service on master] ****************************************************************************
2026-01-15 00:59:52,839 p=42281 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 00:59:52,846 p=42281 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 00:59:56,897 p=42281 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 00:59:56,910 p=42281 u=laxman n=ansible | TASK [Restart K3s agent service on workers] *********************************************************************
2026-01-15 00:59:56,940 p=42281 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 01:00:05,544 p=42281 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:00:05,559 p=42281 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:00:05,641 p=42281 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 01:00:05,641 p=42281 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:00:05,642 p=42281 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:00:05,642 p=42281 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:00:05,642 p=42281 u=laxman n=ansible | 192.168.0.33               : ok=19   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 01:04:20,796 p=43226 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 01:04:20,816 p=43226 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:04:22,923 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:22,953 p=43226 u=laxman n=ansible | TASK [Install Docker dependencies] ******************************************************************************
2026-01-15 01:04:25,777 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:25,784 p=43226 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 01:04:26,669 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:26,677 p=43226 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 01:04:27,439 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:27,452 p=43226 u=laxman n=ansible | TASK [Install Docker Engine] ************************************************************************************
2026-01-15 01:04:28,666 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:28,678 p=43226 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 01:04:29,601 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:29,610 p=43226 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 01:04:30,305 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:30,319 p=43226 u=laxman n=ansible | TASK [Create Jenkins home] **************************************************************************************
2026-01-15 01:04:30,920 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:30,934 p=43226 u=laxman n=ansible | TASK [Create casc_configs directory for Jenkins config] *********************************************************
2026-01-15 01:04:31,435 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:31,449 p=43226 u=laxman n=ansible | TASK [Create plugins directory for Jenkins] *********************************************************************
2026-01-15 01:04:31,942 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:31,954 p=43226 u=laxman n=ansible | TASK [Copy Jenkins JCasC config] ********************************************************************************
2026-01-15 01:04:32,844 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:32,859 p=43226 u=laxman n=ansible | TASK [Remove old Jenkins container if exists] *******************************************************************
2026-01-15 01:04:34,006 p=43226 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 01:04:34,017 p=43226 u=laxman n=ansible | TASK [Install Jenkins plugins via plugin manager (with deps)] ***************************************************
2026-01-15 01:04:45,381 p=43226 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 01:04:45,401 p=43226 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 01:04:46,412 p=43226 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 01:04:46,425 p=43226 u=laxman n=ansible | TASK [Wait for Jenkins to become available] *********************************************************************
2026-01-15 01:04:48,036 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:48,044 p=43226 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 01:04:48,976 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:48,984 p=43226 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***************************************************************************
2026-01-15 01:04:49,461 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:49,471 p=43226 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] ******************************************************
2026-01-15 01:04:50,490 p=43226 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 01:04:51,392 p=43226 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 01:04:52,217 p=43226 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 01:04:52,934 p=43226 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 01:04:52,947 p=43226 u=laxman n=ansible | TASK [Enable UFW safely] ****************************************************************************************
2026-01-15 01:04:54,855 p=43226 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:04:54,896 p=43226 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] *******************************************************
2026-01-15 01:04:54,905 p=43226 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:04:57,193 p=43226 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:04:57,222 p=43226 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:04:58,288 p=43226 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:04:58,337 p=43226 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *********************************************************************
2026-01-15 01:04:58,775 p=43226 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:04:58,797 p=43226 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:04:58,816 p=43226 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:04:58,824 p=43226 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ****************************************************************************
2026-01-15 01:04:59,798 p=43226 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:04:59,799 p=43226 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:04:59,799 p=43226 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:04:59,811 p=43226 u=laxman n=ansible | TASK [Add Nexus registry entry] *********************************************************************************
2026-01-15 01:05:00,415 p=43226 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:05:00,416 p=43226 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:05:00,416 p=43226 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:05:00,429 p=43226 u=laxman n=ansible | TASK [Restart K3s service on master] ****************************************************************************
2026-01-15 01:05:00,485 p=43226 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 01:05:00,496 p=43226 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 01:05:04,520 p=43226 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:05:04,532 p=43226 u=laxman n=ansible | TASK [Restart K3s agent service on workers] *********************************************************************
2026-01-15 01:05:04,563 p=43226 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 01:05:13,237 p=43226 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:05:13,306 p=43226 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:05:13,381 p=43226 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 01:05:13,381 p=43226 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:05:13,381 p=43226 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:05:13,381 p=43226 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:05:13,381 p=43226 u=laxman n=ansible | 192.168.0.33               : ok=19   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 01:19:46,871 p=44683 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 01:19:46,886 p=44683 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:19:49,100 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:19:49,126 p=44683 u=laxman n=ansible | TASK [Install Docker dependencies] ******************************************************************************
2026-01-15 01:19:51,913 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:19:51,934 p=44683 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 01:19:52,858 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:19:52,868 p=44683 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 01:19:53,569 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:19:53,584 p=44683 u=laxman n=ansible | TASK [Install Docker Engine] ************************************************************************************
2026-01-15 01:19:54,800 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:19:54,816 p=44683 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 01:19:55,724 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:19:55,739 p=44683 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 01:19:56,415 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:19:56,428 p=44683 u=laxman n=ansible | TASK [Create Jenkins home] **************************************************************************************
2026-01-15 01:19:56,948 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:19:56,960 p=44683 u=laxman n=ansible | TASK [Create casc_configs directory for Jenkins config] *********************************************************
2026-01-15 01:19:57,449 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:19:57,457 p=44683 u=laxman n=ansible | TASK [Create plugins directory for Jenkins] *********************************************************************
2026-01-15 01:19:57,871 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:19:57,891 p=44683 u=laxman n=ansible | TASK [Copy Jenkins JCasC config] ********************************************************************************
2026-01-15 01:19:58,787 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:19:58,795 p=44683 u=laxman n=ansible | TASK [Copy Jenkins plugins.txt] *********************************************************************************
2026-01-15 01:19:59,708 p=44683 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 01:19:59,715 p=44683 u=laxman n=ansible | TASK [Install Jenkins plugins via plugin manager using plugins.txt] *********************************************
2026-01-15 01:20:09,948 p=44683 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 01:20:09,960 p=44683 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 01:20:10,787 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:20:10,792 p=44683 u=laxman n=ansible | TASK [Wait for Jenkins to become available] *********************************************************************
2026-01-15 01:20:11,289 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:20:11,302 p=44683 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 01:20:12,033 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:20:12,043 p=44683 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***************************************************************************
2026-01-15 01:20:12,513 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:20:12,527 p=44683 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] ******************************************************
2026-01-15 01:20:13,437 p=44683 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 01:20:14,150 p=44683 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 01:20:14,849 p=44683 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 01:20:15,584 p=44683 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 01:20:15,604 p=44683 u=laxman n=ansible | TASK [Enable UFW safely] ****************************************************************************************
2026-01-15 01:20:17,631 p=44683 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:20:17,678 p=44683 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] *******************************************************
2026-01-15 01:20:17,681 p=44683 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:20:19,881 p=44683 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:20:19,896 p=44683 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:20:19,934 p=44683 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:20:19,970 p=44683 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *********************************************************************
2026-01-15 01:20:20,494 p=44683 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:20:20,499 p=44683 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:20:20,499 p=44683 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:20:20,508 p=44683 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ****************************************************************************
2026-01-15 01:20:21,423 p=44683 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:20:21,446 p=44683 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:20:21,452 p=44683 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:20:21,459 p=44683 u=laxman n=ansible | TASK [Add Nexus registry entry] *********************************************************************************
2026-01-15 01:20:21,980 p=44683 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:20:21,980 p=44683 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:20:21,985 p=44683 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:20:21,996 p=44683 u=laxman n=ansible | TASK [Restart K3s service on master] ****************************************************************************
2026-01-15 01:20:22,037 p=44683 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 01:20:22,045 p=44683 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 01:20:26,117 p=44683 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:20:26,130 p=44683 u=laxman n=ansible | TASK [Restart K3s agent service on workers] *********************************************************************
2026-01-15 01:20:26,171 p=44683 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 01:20:34,636 p=44683 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:20:34,841 p=44683 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:20:34,914 p=44683 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 01:20:34,915 p=44683 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:20:34,915 p=44683 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:20:34,915 p=44683 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:20:34,915 p=44683 u=laxman n=ansible | 192.168.0.33               : ok=19   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 01:22:21,754 p=45702 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 01:22:21,776 p=45702 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:22:24,088 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:24,123 p=45702 u=laxman n=ansible | TASK [Install Docker dependencies] ******************************************************************************
2026-01-15 01:22:27,175 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:27,181 p=45702 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 01:22:28,057 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:28,069 p=45702 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 01:22:28,810 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:28,824 p=45702 u=laxman n=ansible | TASK [Install Docker Engine] ************************************************************************************
2026-01-15 01:22:30,022 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:30,032 p=45702 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 01:22:30,867 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:30,879 p=45702 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 01:22:31,470 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:31,475 p=45702 u=laxman n=ansible | TASK [Create Jenkins home] **************************************************************************************
2026-01-15 01:22:31,980 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:31,987 p=45702 u=laxman n=ansible | TASK [Create casc_configs directory for Jenkins config] *********************************************************
2026-01-15 01:22:32,386 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:32,396 p=45702 u=laxman n=ansible | TASK [Create plugins directory for Jenkins] *********************************************************************
2026-01-15 01:22:32,780 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:32,795 p=45702 u=laxman n=ansible | TASK [Copy Jenkins JCasC config] ********************************************************************************
2026-01-15 01:22:33,714 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:33,723 p=45702 u=laxman n=ansible | TASK [Copy Jenkins plugins.txt] *********************************************************************************
2026-01-15 01:22:34,452 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:34,467 p=45702 u=laxman n=ansible | TASK [Install Jenkins plugins via plugin manager using plugins.txt] *********************************************
2026-01-15 01:22:44,791 p=45702 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 01:22:44,803 p=45702 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 01:22:46,142 p=45702 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 01:22:46,153 p=45702 u=laxman n=ansible | TASK [Wait for Jenkins to become available] *********************************************************************
2026-01-15 01:22:47,757 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:47,772 p=45702 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 01:22:48,689 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:48,703 p=45702 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***************************************************************************
2026-01-15 01:22:49,295 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:49,303 p=45702 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] ******************************************************
2026-01-15 01:22:50,214 p=45702 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 01:22:51,178 p=45702 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 01:22:52,194 p=45702 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 01:22:53,082 p=45702 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 01:22:53,098 p=45702 u=laxman n=ansible | TASK [Enable UFW safely] ****************************************************************************************
2026-01-15 01:22:55,130 p=45702 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:22:55,180 p=45702 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] *******************************************************
2026-01-15 01:22:55,185 p=45702 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:22:57,604 p=45702 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:22:57,627 p=45702 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:22:57,644 p=45702 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:22:57,679 p=45702 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *********************************************************************
2026-01-15 01:22:58,107 p=45702 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:22:58,123 p=45702 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:22:58,155 p=45702 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:22:58,163 p=45702 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ****************************************************************************
2026-01-15 01:22:59,265 p=45702 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:22:59,269 p=45702 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:22:59,271 p=45702 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:22:59,284 p=45702 u=laxman n=ansible | TASK [Add Nexus registry entry] *********************************************************************************
2026-01-15 01:22:59,843 p=45702 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:22:59,844 p=45702 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:22:59,850 p=45702 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:22:59,862 p=45702 u=laxman n=ansible | TASK [Restart K3s service on master] ****************************************************************************
2026-01-15 01:22:59,898 p=45702 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 01:22:59,905 p=45702 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 01:23:03,956 p=45702 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:23:03,968 p=45702 u=laxman n=ansible | TASK [Restart K3s agent service on workers] *********************************************************************
2026-01-15 01:23:04,000 p=45702 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 01:23:08,361 p=45702 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:23:12,339 p=45702 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:23:12,458 p=45702 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 01:23:12,458 p=45702 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:23:12,458 p=45702 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:23:12,459 p=45702 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:23:12,459 p=45702 u=laxman n=ansible | 192.168.0.33               : ok=19   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 01:27:18,147 p=46570 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 01:27:18,158 p=46570 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:27:20,477 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:20,504 p=46570 u=laxman n=ansible | TASK [Install Docker prerequisites] *****************************************************************************
2026-01-15 01:27:23,399 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:23,413 p=46570 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 01:27:24,334 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:24,341 p=46570 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 01:27:25,063 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:25,075 p=46570 u=laxman n=ansible | TASK [Install Docker Engine] ************************************************************************************
2026-01-15 01:27:26,296 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:26,305 p=46570 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 01:27:27,213 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:27,227 p=46570 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 01:27:27,928 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:27,942 p=46570 u=laxman n=ansible | TASK [Create Jenkins home directory] ****************************************************************************
2026-01-15 01:27:28,547 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:28,558 p=46570 u=laxman n=ansible | TASK [Create Nexus data directory] ******************************************************************************
2026-01-15 01:27:29,056 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:29,067 p=46570 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 01:27:30,069 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:30,080 p=46570 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *************************************************************************
2026-01-15 01:27:30,604 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:30,613 p=46570 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 01:27:31,429 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:31,439 p=46570 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***************************************************************************
2026-01-15 01:27:31,924 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:31,934 p=46570 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] ******************************************************
2026-01-15 01:27:32,847 p=46570 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 01:27:33,559 p=46570 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 01:27:34,381 p=46570 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 01:27:35,090 p=46570 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 01:27:35,101 p=46570 u=laxman n=ansible | TASK [Enable UFW safely] ****************************************************************************************
2026-01-15 01:27:37,145 p=46570 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:27:37,186 p=46570 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] *******************************************************
2026-01-15 01:27:37,189 p=46570 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:27:39,541 p=46570 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:27:39,553 p=46570 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:27:39,596 p=46570 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:27:39,628 p=46570 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *********************************************************************
2026-01-15 01:27:40,108 p=46570 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:27:40,114 p=46570 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:27:40,133 p=46570 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:27:40,152 p=46570 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ****************************************************************************
2026-01-15 01:27:41,451 p=46570 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:27:41,451 p=46570 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:27:41,452 p=46570 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:27:41,467 p=46570 u=laxman n=ansible | TASK [Add Nexus registry entry] *********************************************************************************
2026-01-15 01:27:42,091 p=46570 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:27:42,096 p=46570 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:27:42,118 p=46570 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:27:42,129 p=46570 u=laxman n=ansible | TASK [Restart K3s service on master] ****************************************************************************
2026-01-15 01:27:42,192 p=46570 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 01:27:42,203 p=46570 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 01:27:46,374 p=46570 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:27:46,392 p=46570 u=laxman n=ansible | TASK [Restart K3s agent service on workers] *********************************************************************
2026-01-15 01:27:46,425 p=46570 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 01:27:50,660 p=46570 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:27:54,816 p=46570 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:27:54,934 p=46570 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 01:27:54,935 p=46570 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:27:54,935 p=46570 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:27:54,935 p=46570 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:27:54,935 p=46570 u=laxman n=ansible | 192.168.0.33               : ok=15   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 01:32:29,812 p=47953 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 01:32:29,822 p=47953 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:32:31,986 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:32:32,009 p=47953 u=laxman n=ansible | TASK [Install Docker prerequisites] *****************************************************************************
2026-01-15 01:32:35,191 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:32:35,206 p=47953 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 01:32:36,148 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:32:36,162 p=47953 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 01:32:36,855 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:32:36,861 p=47953 u=laxman n=ansible | TASK [Install Docker Engine] ************************************************************************************
2026-01-15 01:32:38,029 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:32:38,037 p=47953 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 01:32:38,923 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:32:38,930 p=47953 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 01:32:39,540 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:32:39,551 p=47953 u=laxman n=ansible | TASK [Create Jenkins home directory] ****************************************************************************
2026-01-15 01:32:40,081 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:32:40,094 p=47953 u=laxman n=ansible | TASK [Create Nexus data directory] ******************************************************************************
2026-01-15 01:32:40,558 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:32:40,568 p=47953 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 01:33:12,939 p=47953 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 01:33:12,953 p=47953 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *************************************************************************
2026-01-15 01:33:14,761 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:33:14,770 p=47953 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 01:33:15,691 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:33:15,705 p=47953 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***************************************************************************
2026-01-15 01:33:16,203 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:33:16,214 p=47953 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] ******************************************************
2026-01-15 01:33:17,226 p=47953 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 01:33:18,043 p=47953 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 01:33:18,956 p=47953 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 01:33:19,810 p=47953 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 01:33:19,825 p=47953 u=laxman n=ansible | TASK [Enable UFW safely] ****************************************************************************************
2026-01-15 01:33:21,861 p=47953 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:33:21,898 p=47953 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] *******************************************************
2026-01-15 01:33:21,901 p=47953 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:33:24,127 p=47953 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:33:24,175 p=47953 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:33:24,269 p=47953 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:33:24,305 p=47953 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *********************************************************************
2026-01-15 01:33:24,724 p=47953 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:33:24,741 p=47953 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:33:24,771 p=47953 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:33:24,780 p=47953 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ****************************************************************************
2026-01-15 01:33:25,984 p=47953 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:33:25,993 p=47953 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:33:26,016 p=47953 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:33:26,026 p=47953 u=laxman n=ansible | TASK [Add Nexus registry entry] *********************************************************************************
2026-01-15 01:33:26,751 p=47953 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:33:26,763 p=47953 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:33:26,764 p=47953 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:33:26,770 p=47953 u=laxman n=ansible | TASK [Restart K3s service on master] ****************************************************************************
2026-01-15 01:33:26,803 p=47953 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 01:33:26,811 p=47953 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 01:33:31,043 p=47953 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:33:31,052 p=47953 u=laxman n=ansible | TASK [Restart K3s agent service on workers] *********************************************************************
2026-01-15 01:33:31,078 p=47953 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 01:33:35,433 p=47953 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:33:35,740 p=47953 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:33:35,825 p=47953 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 01:33:35,825 p=47953 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:33:35,825 p=47953 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:33:35,825 p=47953 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:33:35,825 p=47953 u=laxman n=ansible | 192.168.0.33               : ok=15   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 01:57:07,651 p=49983 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] *****************************************************************************
2026-01-15 01:57:07,664 p=49983 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:57:09,598 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:09,606 p=49983 u=laxman n=ansible | TASK [Install Docker prerequisites] *****************************************************************************
2026-01-15 01:57:12,705 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:12,711 p=49983 u=laxman n=ansible | TASK [Add Docker GPG key] ***************************************************************************************
2026-01-15 01:57:13,449 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:13,454 p=49983 u=laxman n=ansible | TASK [Add Docker repository] ************************************************************************************
2026-01-15 01:57:14,012 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:14,015 p=49983 u=laxman n=ansible | TASK [Install Docker Engine] ************************************************************************************
2026-01-15 01:57:15,138 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:15,144 p=49983 u=laxman n=ansible | TASK [Ensure Docker is running] *********************************************************************************
2026-01-15 01:57:15,811 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:15,814 p=49983 u=laxman n=ansible | TASK [Add ansible user to docker group] *************************************************************************
2026-01-15 01:57:16,307 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:16,311 p=49983 u=laxman n=ansible | TASK [Create Jenkins home directory] ****************************************************************************
2026-01-15 01:57:16,721 p=49983 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 01:57:16,724 p=49983 u=laxman n=ansible | TASK [Create Nexus data directory] ******************************************************************************
2026-01-15 01:57:17,058 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:17,064 p=49983 u=laxman n=ansible | TASK [Start Jenkins container] **********************************************************************************
2026-01-15 01:57:18,162 p=49983 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 01:57:18,165 p=49983 u=laxman n=ansible | TASK [Wait for Jenkins to be available] *************************************************************************
2026-01-15 01:57:20,643 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:20,646 p=49983 u=laxman n=ansible | TASK [Start Nexus container] ************************************************************************************
2026-01-15 01:57:21,498 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:21,504 p=49983 u=laxman n=ansible | TASK [Wait for Nexus to be available] ***************************************************************************
2026-01-15 01:57:21,905 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:21,911 p=49983 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Docker Registry ports] ******************************************************
2026-01-15 01:57:22,767 p=49983 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 01:57:23,557 p=49983 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 01:57:24,390 p=49983 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 01:57:25,220 p=49983 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 01:57:25,227 p=49983 u=laxman n=ansible | TASK [Enable UFW safely] ****************************************************************************************
2026-01-15 01:57:27,184 p=49983 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 01:57:27,197 p=49983 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] *******************************************************
2026-01-15 01:57:27,199 p=49983 u=laxman n=ansible | TASK [Gathering Facts] ******************************************************************************************
2026-01-15 01:57:29,607 p=49983 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:57:29,688 p=49983 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:57:29,762 p=49983 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:57:29,784 p=49983 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] *********************************************************************
2026-01-15 01:57:30,316 p=49983 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 01:57:30,347 p=49983 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 01:57:30,471 p=49983 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 01:57:30,479 p=49983 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ****************************************************************************
2026-01-15 01:57:31,578 p=49983 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:57:31,622 p=49983 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:57:31,662 p=49983 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:57:31,666 p=49983 u=laxman n=ansible | TASK [Add Nexus registry entry] *********************************************************************************
2026-01-15 01:57:32,199 p=49983 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:57:32,205 p=49983 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:57:32,290 p=49983 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:57:32,295 p=49983 u=laxman n=ansible | TASK [Restart K3s service on master] ****************************************************************************
2026-01-15 01:57:32,315 p=49983 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 01:57:32,319 p=49983 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 01:57:36,362 p=49983 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 01:57:36,366 p=49983 u=laxman n=ansible | TASK [Restart K3s agent service on workers] *********************************************************************
2026-01-15 01:57:36,393 p=49983 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 01:57:44,959 p=49983 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 01:57:45,000 p=49983 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 01:57:45,057 p=49983 u=laxman n=ansible | PLAY RECAP ******************************************************************************************************
2026-01-15 01:57:45,057 p=49983 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:57:45,057 p=49983 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:57:45,057 p=49983 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 01:57:45,057 p=49983 u=laxman n=ansible | 192.168.0.33               : ok=15   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 09:03:33,233 p=55391 u=laxman n=ansible | ERROR! conflicting action statements: docker_container, auto_remove

The error appears to be in '/home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/04-jenkins-nexus.yml': line 569, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


    - name: Install Docker CLI in Jenkins container
      ^ here

2026-01-15 09:08:24,934 p=55777 u=laxman n=ansible | ERROR! conflicting action statements: docker_container, auto_remove

The error appears to be in '/home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/04-jenkins-nexus.yml': line 127, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


    - name: Install Docker CLI in Jenkins container
      ^ here

2026-01-15 09:10:12,487 p=55926 u=laxman n=ansible | ERROR! 'apt' is not a valid attribute for a Play

The error appears to be in '/home/laxman/k8s-devops-lab/proxmox/ansible/playbooks/04-jenkins-nexus.yml': line 35, column 5, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


  - name: Install Docker prerequisites
    ^ here

2026-01-15 09:16:12,131 p=56391 u=laxman n=ansible | playbook: playbooks/04-jenkins-nexus.yml
2026-01-15 09:16:22,591 p=56456 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] ************************************************************************************
2026-01-15 09:16:22,608 p=56456 u=laxman n=ansible | TASK [Gathering Facts] *************************************************************************************************
2026-01-15 09:16:24,984 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:25,010 p=56456 u=laxman n=ansible | TASK [Install Docker prerequisites] ************************************************************************************
2026-01-15 09:16:28,244 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:28,261 p=56456 u=laxman n=ansible | TASK [Add Docker GPG key] **********************************************************************************************
2026-01-15 09:16:29,196 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:29,206 p=56456 u=laxman n=ansible | TASK [Add Docker repository] *******************************************************************************************
2026-01-15 09:16:29,941 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:29,953 p=56456 u=laxman n=ansible | TASK [Install Docker Engine] *******************************************************************************************
2026-01-15 09:16:31,230 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:31,241 p=56456 u=laxman n=ansible | TASK [Ensure Docker is running] ****************************************************************************************
2026-01-15 09:16:32,169 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:32,182 p=56456 u=laxman n=ansible | TASK [Add ansible user to docker group] ********************************************************************************
2026-01-15 09:16:32,885 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:32,908 p=56456 u=laxman n=ansible | TASK [Create Docker network for CI/CD] *********************************************************************************
2026-01-15 09:16:33,702 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:33,708 p=56456 u=laxman n=ansible | TASK [Create Jenkins home directory] ***********************************************************************************
2026-01-15 09:16:34,226 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:34,241 p=56456 u=laxman n=ansible | TASK [Create Nexus data directory] *************************************************************************************
2026-01-15 09:16:34,742 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:34,756 p=56456 u=laxman n=ansible | TASK [Start Jenkins container] *****************************************************************************************
2026-01-15 09:16:36,408 p=56456 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 09:16:36,420 p=56456 u=laxman n=ansible | TASK [Wait for Jenkins to be available] ********************************************************************************
2026-01-15 09:16:38,080 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:38,104 p=56456 u=laxman n=ansible | TASK [Start Nexus container] *******************************************************************************************
2026-01-15 09:16:39,093 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:39,099 p=56456 u=laxman n=ansible | TASK [Wait for Nexus to be available] **********************************************************************************
2026-01-15 09:16:39,580 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:39,591 p=56456 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Registry ports] ********************************************************************
2026-01-15 09:16:40,752 p=56456 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 09:16:41,573 p=56456 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 09:16:42,455 p=56456 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 09:16:43,375 p=56456 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 09:16:43,383 p=56456 u=laxman n=ansible | TASK [Enable UFW safely] ***********************************************************************************************
2026-01-15 09:16:45,669 p=56456 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 09:16:45,714 p=56456 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] **************************************************************
2026-01-15 09:16:45,717 p=56456 u=laxman n=ansible | TASK [Gathering Facts] *************************************************************************************************
2026-01-15 09:16:48,611 p=56456 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 09:16:48,677 p=56456 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 09:16:48,725 p=56456 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 09:16:48,758 p=56456 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] ****************************************************************************
2026-01-15 09:16:49,414 p=56456 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 09:16:49,414 p=56456 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 09:16:49,415 p=56456 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 09:16:49,430 p=56456 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ***********************************************************************************
2026-01-15 09:16:50,734 p=56456 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 09:16:50,737 p=56456 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 09:16:50,758 p=56456 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 09:16:50,768 p=56456 u=laxman n=ansible | TASK [Configure Nexus registry mirror] *********************************************************************************
2026-01-15 09:16:51,333 p=56456 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 09:16:51,337 p=56456 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 09:16:51,339 p=56456 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 09:16:51,353 p=56456 u=laxman n=ansible | TASK [Restart K3s server on master] ************************************************************************************
2026-01-15 09:16:51,387 p=56456 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 09:16:51,393 p=56456 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 09:16:55,370 p=56456 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 09:16:55,379 p=56456 u=laxman n=ansible | TASK [Restart K3s agent on workers] ************************************************************************************
2026-01-15 09:16:55,400 p=56456 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 09:17:04,082 p=56456 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 09:17:04,116 p=56456 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 09:17:04,215 p=56456 u=laxman n=ansible | PLAY RECAP *************************************************************************************************************
2026-01-15 09:17:04,215 p=56456 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 09:17:04,215 p=56456 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 09:17:04,215 p=56456 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 09:17:04,216 p=56456 u=laxman n=ansible | 192.168.0.33               : ok=16   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 10:27:57,147 p=61370 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] ************************************************************************************
2026-01-15 10:27:57,168 p=61370 u=laxman n=ansible | TASK [Gathering Facts] *************************************************************************************************
2026-01-15 10:27:59,522 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:27:59,542 p=61370 u=laxman n=ansible | TASK [Install Docker prerequisites] ************************************************************************************
2026-01-15 10:28:09,692 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:09,697 p=61370 u=laxman n=ansible | TASK [Add Docker GPG key] **********************************************************************************************
2026-01-15 10:28:10,578 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:10,591 p=61370 u=laxman n=ansible | TASK [Add Docker repository] *******************************************************************************************
2026-01-15 10:28:11,279 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:11,297 p=61370 u=laxman n=ansible | TASK [Install Docker Engine] *******************************************************************************************
2026-01-15 10:28:12,506 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:12,519 p=61370 u=laxman n=ansible | TASK [Ensure Docker is running] ****************************************************************************************
2026-01-15 10:28:13,440 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:13,453 p=61370 u=laxman n=ansible | TASK [Add ansible user to docker group] ********************************************************************************
2026-01-15 10:28:14,095 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:14,113 p=61370 u=laxman n=ansible | TASK [Create Docker network for CI/CD] *********************************************************************************
2026-01-15 10:28:14,854 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:14,864 p=61370 u=laxman n=ansible | TASK [Create Jenkins home directory] ***********************************************************************************
2026-01-15 10:28:15,455 p=61370 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:28:15,468 p=61370 u=laxman n=ansible | TASK [Create Nexus data directory] *************************************************************************************
2026-01-15 10:28:15,955 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:15,969 p=61370 u=laxman n=ansible | TASK [Create Jenkins tools directory] **********************************************************************************
2026-01-15 10:28:16,356 p=61370 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:28:16,363 p=61370 u=laxman n=ansible | TASK [Download kubectl binary] *****************************************************************************************
2026-01-15 10:28:21,085 p=61370 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:28:21,100 p=61370 u=laxman n=ansible | TASK [Download Docker CLI archive] *************************************************************************************
2026-01-15 10:28:26,874 p=61370 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:28:26,888 p=61370 u=laxman n=ansible | TASK [Extract Docker CLI] **********************************************************************************************
2026-01-15 10:28:32,084 p=61370 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:28:32,090 p=61370 u=laxman n=ansible | TASK [Symlink docker binary into tools root] ***************************************************************************
2026-01-15 10:28:32,503 p=61370 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:28:32,519 p=61370 u=laxman n=ansible | TASK [Ensure kubeconfig directory exists] ******************************************************************************
2026-01-15 10:28:33,018 p=61370 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:28:33,036 p=61370 u=laxman n=ansible | TASK [Touch kubeconfig file if missing (placeholder)] ******************************************************************
2026-01-15 10:28:33,946 p=61370 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:28:33,953 p=61370 u=laxman n=ansible | TASK [Start Jenkins container] *****************************************************************************************
2026-01-15 10:28:35,398 p=61370 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:28:35,408 p=61370 u=laxman n=ansible | TASK [Wait for Jenkins to be available] ********************************************************************************
2026-01-15 10:28:38,085 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:38,101 p=61370 u=laxman n=ansible | TASK [Start Nexus container] *******************************************************************************************
2026-01-15 10:28:39,238 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:39,250 p=61370 u=laxman n=ansible | TASK [Wait for Nexus to be available] **********************************************************************************
2026-01-15 10:28:39,807 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:39,820 p=61370 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Registry ports] ********************************************************************
2026-01-15 10:28:40,987 p=61370 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 10:28:41,828 p=61370 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 10:28:42,613 p=61370 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 10:28:43,326 p=61370 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 10:28:43,341 p=61370 u=laxman n=ansible | TASK [Enable UFW safely] ***********************************************************************************************
2026-01-15 10:28:45,401 p=61370 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:28:45,445 p=61370 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] **************************************************************
2026-01-15 10:28:45,448 p=61370 u=laxman n=ansible | TASK [Gathering Facts] *************************************************************************************************
2026-01-15 10:28:47,787 p=61370 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 10:28:47,816 p=61370 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 10:28:47,834 p=61370 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 10:28:47,873 p=61370 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] ****************************************************************************
2026-01-15 10:28:48,341 p=61370 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 10:28:48,352 p=61370 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 10:28:48,378 p=61370 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 10:28:48,386 p=61370 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ***********************************************************************************
2026-01-15 10:28:49,342 p=61370 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 10:28:49,343 p=61370 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 10:28:49,364 p=61370 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 10:28:49,373 p=61370 u=laxman n=ansible | TASK [Configure Nexus registry mirror] *********************************************************************************
2026-01-15 10:28:50,145 p=61370 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 10:28:50,150 p=61370 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 10:28:50,210 p=61370 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 10:28:50,222 p=61370 u=laxman n=ansible | TASK [Restart K3s server on master] ************************************************************************************
2026-01-15 10:28:50,268 p=61370 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 10:28:50,276 p=61370 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 10:28:54,383 p=61370 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 10:28:54,390 p=61370 u=laxman n=ansible | TASK [Restart K3s agent on workers] ************************************************************************************
2026-01-15 10:28:54,422 p=61370 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 10:29:03,085 p=61370 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 10:29:03,156 p=61370 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 10:29:03,230 p=61370 u=laxman n=ansible | PLAY RECAP *************************************************************************************************************
2026-01-15 10:29:03,230 p=61370 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 10:29:03,230 p=61370 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 10:29:03,230 p=61370 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 10:29:03,230 p=61370 u=laxman n=ansible | 192.168.0.33               : ok=23   changed=9    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-15 10:46:04,664 p=63588 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] ************************************************************************************
2026-01-15 10:46:04,684 p=63588 u=laxman n=ansible | TASK [Gathering Facts] *************************************************************************************************
2026-01-15 10:46:07,068 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:07,099 p=63588 u=laxman n=ansible | TASK [Install Docker prerequisites] ************************************************************************************
2026-01-15 10:46:09,885 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:09,895 p=63588 u=laxman n=ansible | TASK [Add Docker GPG key] **********************************************************************************************
2026-01-15 10:46:10,789 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:10,805 p=63588 u=laxman n=ansible | TASK [Add Docker repository] *******************************************************************************************
2026-01-15 10:46:11,559 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:11,573 p=63588 u=laxman n=ansible | TASK [Install Docker Engine] *******************************************************************************************
2026-01-15 10:46:12,755 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:12,760 p=63588 u=laxman n=ansible | TASK [Ensure Docker is running] ****************************************************************************************
2026-01-15 10:46:13,694 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:13,707 p=63588 u=laxman n=ansible | TASK [Add ansible user to docker group] ********************************************************************************
2026-01-15 10:46:14,412 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:14,423 p=63588 u=laxman n=ansible | TASK [Create Docker network for CI/CD] *********************************************************************************
2026-01-15 10:46:15,266 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:15,280 p=63588 u=laxman n=ansible | TASK [Create Jenkins home directory] ***********************************************************************************
2026-01-15 10:46:15,866 p=63588 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:46:15,879 p=63588 u=laxman n=ansible | TASK [Create Nexus data directory] *************************************************************************************
2026-01-15 10:46:16,362 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:16,374 p=63588 u=laxman n=ansible | TASK [Create Jenkins tools directory] **********************************************************************************
2026-01-15 10:46:16,779 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:16,791 p=63588 u=laxman n=ansible | TASK [Download kubectl binary] *****************************************************************************************
2026-01-15 10:46:17,914 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:17,932 p=63588 u=laxman n=ansible | TASK [Download Docker CLI archive] *************************************************************************************
2026-01-15 10:46:18,490 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:18,504 p=63588 u=laxman n=ansible | TASK [Extract Docker CLI] **********************************************************************************************
2026-01-15 10:46:18,643 p=63588 u=laxman n=ansible | skipping: [192.168.0.33]
2026-01-15 10:46:18,651 p=63588 u=laxman n=ansible | TASK [Symlink docker binary into tools root] ***************************************************************************
2026-01-15 10:46:19,085 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:19,118 p=63588 u=laxman n=ansible | TASK [Ensure kubeconfig directory exists] ******************************************************************************
2026-01-15 10:46:19,647 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:19,659 p=63588 u=laxman n=ansible | TASK [Touch kubeconfig file if missing (placeholder)] ******************************************************************
2026-01-15 10:46:20,591 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:20,602 p=63588 u=laxman n=ansible | TASK [Start Jenkins container] *****************************************************************************************
2026-01-15 10:46:21,921 p=63588 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:46:21,929 p=63588 u=laxman n=ansible | TASK [Wait for Jenkins to be available] ********************************************************************************
2026-01-15 10:46:24,703 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:24,716 p=63588 u=laxman n=ansible | TASK [Start Nexus container] *******************************************************************************************
2026-01-15 10:46:25,663 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:25,667 p=63588 u=laxman n=ansible | TASK [Wait for Nexus to be available] **********************************************************************************
2026-01-15 10:46:26,131 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:26,135 p=63588 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Registry ports] ********************************************************************
2026-01-15 10:46:27,044 p=63588 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 10:46:27,877 p=63588 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 10:46:28,666 p=63588 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 10:46:29,389 p=63588 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 10:46:29,398 p=63588 u=laxman n=ansible | TASK [Enable UFW safely] ***********************************************************************************************
2026-01-15 10:46:31,291 p=63588 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:46:31,308 p=63588 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] **************************************************************
2026-01-15 10:46:31,310 p=63588 u=laxman n=ansible | TASK [Gathering Facts] *************************************************************************************************
2026-01-15 10:46:33,357 p=63588 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 10:46:33,424 p=63588 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 10:46:33,460 p=63588 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 10:46:33,480 p=63588 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] ****************************************************************************
2026-01-15 10:46:33,855 p=63588 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 10:46:33,872 p=63588 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 10:46:33,905 p=63588 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 10:46:33,909 p=63588 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ***********************************************************************************
2026-01-15 10:46:34,787 p=63588 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 10:46:34,790 p=63588 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 10:46:34,818 p=63588 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 10:46:34,822 p=63588 u=laxman n=ansible | TASK [Configure Nexus registry mirror] *********************************************************************************
2026-01-15 10:46:35,319 p=63588 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 10:46:35,321 p=63588 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 10:46:35,336 p=63588 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 10:46:35,339 p=63588 u=laxman n=ansible | TASK [Restart K3s server on master] ************************************************************************************
2026-01-15 10:46:35,361 p=63588 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 10:46:35,368 p=63588 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 10:46:39,695 p=63588 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 10:46:39,700 p=63588 u=laxman n=ansible | TASK [Restart K3s agent on workers] ************************************************************************************
2026-01-15 10:46:39,719 p=63588 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 10:46:48,277 p=63588 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 10:46:48,322 p=63588 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 10:46:48,380 p=63588 u=laxman n=ansible | PLAY RECAP *************************************************************************************************************
2026-01-15 10:46:48,380 p=63588 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 10:46:48,380 p=63588 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 10:46:48,380 p=63588 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 10:46:48,381 p=63588 u=laxman n=ansible | 192.168.0.33               : ok=22   changed=2    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 10:50:48,808 p=64722 u=laxman n=ansible | PLAY [Setup Jenkins + Nexus server] ************************************************************************************
2026-01-15 10:50:48,822 p=64722 u=laxman n=ansible | TASK [Gathering Facts] *************************************************************************************************
2026-01-15 10:50:50,667 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:50,675 p=64722 u=laxman n=ansible | TASK [Install Docker prerequisites] ************************************************************************************
2026-01-15 10:50:53,335 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:53,338 p=64722 u=laxman n=ansible | TASK [Add Docker GPG key] **********************************************************************************************
2026-01-15 10:50:54,074 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:54,079 p=64722 u=laxman n=ansible | TASK [Add Docker repository] *******************************************************************************************
2026-01-15 10:50:54,622 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:54,625 p=64722 u=laxman n=ansible | TASK [Install Docker Engine] *******************************************************************************************
2026-01-15 10:50:55,709 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:55,713 p=64722 u=laxman n=ansible | TASK [Ensure Docker is running] ****************************************************************************************
2026-01-15 10:50:56,411 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:56,421 p=64722 u=laxman n=ansible | TASK [Add ansible user to docker group] ********************************************************************************
2026-01-15 10:50:56,941 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:56,945 p=64722 u=laxman n=ansible | TASK [Create Docker network for CI/CD] *********************************************************************************
2026-01-15 10:50:57,578 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:57,582 p=64722 u=laxman n=ansible | TASK [Create Jenkins home directory] ***********************************************************************************
2026-01-15 10:50:57,998 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:58,003 p=64722 u=laxman n=ansible | TASK [Create Nexus data directory] *************************************************************************************
2026-01-15 10:50:58,336 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:58,341 p=64722 u=laxman n=ansible | TASK [Create Jenkins tools directory] **********************************************************************************
2026-01-15 10:50:58,671 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:58,675 p=64722 u=laxman n=ansible | TASK [Download kubectl binary] *****************************************************************************************
2026-01-15 10:50:59,653 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:50:59,658 p=64722 u=laxman n=ansible | TASK [Download Docker CLI archive] *************************************************************************************
2026-01-15 10:51:00,143 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:51:00,149 p=64722 u=laxman n=ansible | TASK [Extract Docker CLI] **********************************************************************************************
2026-01-15 10:51:00,240 p=64722 u=laxman n=ansible | skipping: [192.168.0.33]
2026-01-15 10:51:00,243 p=64722 u=laxman n=ansible | TASK [Symlink docker binary into tools root] ***************************************************************************
2026-01-15 10:51:00,575 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:51:00,579 p=64722 u=laxman n=ansible | TASK [Ensure kubeconfig directory exists] ******************************************************************************
2026-01-15 10:51:00,965 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:51:00,970 p=64722 u=laxman n=ansible | TASK [Touch kubeconfig file if missing (placeholder)] ******************************************************************
2026-01-15 10:51:01,658 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:51:01,663 p=64722 u=laxman n=ansible | TASK [Start Jenkins container] *****************************************************************************************
2026-01-15 10:51:02,777 p=64722 u=laxman n=ansible | changed: [192.168.0.33]
2026-01-15 10:51:02,781 p=64722 u=laxman n=ansible | TASK [Wait for Jenkins to be available] ********************************************************************************
2026-01-15 10:51:05,300 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:51:05,304 p=64722 u=laxman n=ansible | TASK [Start Nexus container] *******************************************************************************************
2026-01-15 10:51:06,140 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:51:06,144 p=64722 u=laxman n=ansible | TASK [Wait for Nexus to be available] **********************************************************************************
2026-01-15 10:51:06,561 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:51:06,566 p=64722 u=laxman n=ansible | TASK [Allow SSH, Jenkins, Nexus and Registry ports] ********************************************************************
2026-01-15 10:51:07,438 p=64722 u=laxman n=ansible | ok: [192.168.0.33] => (item=22)
2026-01-15 10:51:08,309 p=64722 u=laxman n=ansible | ok: [192.168.0.33] => (item=8080)
2026-01-15 10:51:09,113 p=64722 u=laxman n=ansible | ok: [192.168.0.33] => (item=8081)
2026-01-15 10:51:09,941 p=64722 u=laxman n=ansible | ok: [192.168.0.33] => (item=5000)
2026-01-15 10:51:09,948 p=64722 u=laxman n=ansible | TASK [Enable UFW safely] ***********************************************************************************************
2026-01-15 10:51:11,859 p=64722 u=laxman n=ansible | ok: [192.168.0.33]
2026-01-15 10:51:11,872 p=64722 u=laxman n=ansible | PLAY [Configure K3s nodes to trust Nexus Docker registry] **************************************************************
2026-01-15 10:51:11,874 p=64722 u=laxman n=ansible | TASK [Gathering Facts] *************************************************************************************************
2026-01-15 10:51:14,255 p=64722 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 10:51:14,257 p=64722 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 10:51:14,308 p=64722 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 10:51:14,332 p=64722 u=laxman n=ansible | TASK [Ensure K3s registry directory exists] ****************************************************************************
2026-01-15 10:51:14,835 p=64722 u=laxman n=ansible | ok: [192.168.0.32]
2026-01-15 10:51:14,837 p=64722 u=laxman n=ansible | ok: [192.168.0.31]
2026-01-15 10:51:14,908 p=64722 u=laxman n=ansible | ok: [192.168.0.30]
2026-01-15 10:51:14,912 p=64722 u=laxman n=ansible | TASK [Ensure registries.yaml exists] ***********************************************************************************
2026-01-15 10:51:16,023 p=64722 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 10:51:16,041 p=64722 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 10:51:16,091 p=64722 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 10:51:16,095 p=64722 u=laxman n=ansible | TASK [Configure Nexus registry mirror] *********************************************************************************
2026-01-15 10:51:16,677 p=64722 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 10:51:16,716 p=64722 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 10:51:16,717 p=64722 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 10:51:16,721 p=64722 u=laxman n=ansible | TASK [Restart K3s server on master] ************************************************************************************
2026-01-15 10:51:16,743 p=64722 u=laxman n=ansible | skipping: [192.168.0.31]
2026-01-15 10:51:16,748 p=64722 u=laxman n=ansible | skipping: [192.168.0.32]
2026-01-15 10:51:21,104 p=64722 u=laxman n=ansible | changed: [192.168.0.30]
2026-01-15 10:51:21,110 p=64722 u=laxman n=ansible | TASK [Restart K3s agent on workers] ************************************************************************************
2026-01-15 10:51:21,132 p=64722 u=laxman n=ansible | skipping: [192.168.0.30]
2026-01-15 10:51:29,561 p=64722 u=laxman n=ansible | changed: [192.168.0.31]
2026-01-15 10:51:29,588 p=64722 u=laxman n=ansible | changed: [192.168.0.32]
2026-01-15 10:51:29,639 p=64722 u=laxman n=ansible | PLAY RECAP *************************************************************************************************************
2026-01-15 10:51:29,639 p=64722 u=laxman n=ansible | 192.168.0.30               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 10:51:29,639 p=64722 u=laxman n=ansible | 192.168.0.31               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 10:51:29,639 p=64722 u=laxman n=ansible | 192.168.0.32               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-15 10:51:29,640 p=64722 u=laxman n=ansible | 192.168.0.33               : ok=22   changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
